import{e as w,ad as R,bt as Pa,bK as La,h as st,c as Ia,I as nt,bL as Re,r as Q,bM as Yt,bN as Da,_ as X,f as W,bO as Oa,bP as Ba,aH as rt,K as He,bQ as ze,bR as ee,bS as Na,bT as ht,bU as Ea,bV as G,au as We,bW as Rt,bX as Fe,bY as Ge,bZ as _t,b_ as ae,b$ as Ra,B as re,c0 as Ha,c1 as Ve,c2 as Ye,c3 as Xe,c4 as $e,c5 as Ze,c6 as qe,c7 as za,c8 as Wa,c9 as Fa,ca as Ga,cb as Va,cc as Ya,cd as Xa,ce as $a,cf as ie,cg as Za,i as tt,aP as ne,ch as Ht,F as Ke,ci as zt,bm as vt,S as qa,L as Wt,q as ct,G as wt,M as St,O as Ue,Q as Qe,cj as Ka,aA as Ua,af as Ct,ap as Xt,ah as Qa,ar as $,ck as ja,cl as je,cm as oe,a9 as ot,o as gt,cn as Je,co as Mt,d as j,X as $t,J as ta,T as Zt,cp as Ja,ae as tr,aJ as er,aD as ea,aF as Ft,aC as ar,j as qt,V as J,cq as rr,aI as ir,a8 as aa,k as nr,cr as or,v as ra,ai as H,cs as sr,ct as ia,ak as se,cu as lr,cv as Tt,cw as na,cx as ur,cy as hr,R as fr,cz as vr,bj as cr,bq as le,cA as dr,cB as ue,cC as he,cD as gr,H as pr,cE as mr,cF as yr,cG as Dt,U as xr,b9 as fe}from"./installCanvasRenderer-5a1e3a7f.js";function _n(r,e,t){t=t||{};var a=t.byIndex,i=t.stackedCoordDimension,n,o,s;_r(e)?n=e:(o=e.schema,n=o.dimensions,s=e.store);var l=!!(r&&r.get("stack")),u,h,f,v;if(w(n,function(y,x){R(y)&&(n[x]=y={name:y}),l&&!y.isExtraCoord&&(!a&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(h=y))}),h&&!a&&!u&&(a=!0),h){f="__\0ecstackresult_"+r.id,v="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var c=h.coordDim,d=h.type,p=0;w(n,function(y){y.coordDim===c&&p++});var m={name:f,coordDim:c,coordDimIndex:p,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length},g={name:v,coordDim:v,coordDimIndex:p+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(v,d),g.storeDimIndex=s.ensureCalculationDimension(f,d)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(n.push(m),n.push(g))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:a,stackedOverDimension:v,stackResultDimension:f}}function _r(r){return!Pa(r.schema)}function oa(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function br(r,e){return oa(r,e)?r.getCalculationInfo("stackResultDimension"):e}var sa=function(){function r(e){this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var a=this._extent;isNaN(e)||(a[0]=e),isNaN(t)||(a[1]=t)},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r}();La(sa);const q=sa;var wr=0,Sr=function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++wr}return r.createByAxisModel=function(e){var t=e.option,a=t.data,i=a&&st(a,Mr);return new r({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,a=this._needCollect;if(!R(e)&&!a)return e;if(a&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(a?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=Ia(this.categories))},r}();function Mr(r){return nt(r)&&r.value!=null?r.value:r+""}const ve=Sr;function bn(r){return r.type==="interval"||r.type==="log"}function Tr(r,e,t,a){var i={},n=r[1]-r[0],o=i.interval=Re(n/e,!0);t!=null&&o<t&&(o=i.interval=t),a!=null&&o>a&&(o=i.interval=a);var s=i.intervalPrecision=la(o),l=i.niceTickExtent=[Q(Math.ceil(r[0]/o)*o,s),Q(Math.floor(r[1]/o)*o,s)];return Cr(l,r),i}function wn(r){var e=Math.pow(10,Da(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Q(t*e)}function la(r){return Yt(r)+2}function ce(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function Cr(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),ce(r,0,e),ce(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function At(r,e){return r>=e[0]&&r<=e[1]}function kt(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function Pt(r,e){return r*(e[1]-e[0])+e[0]}var ua=function(r){X(e,r);function e(t){var a=r.call(this,t)||this;a.type="ordinal";var i=a.getSetting("ordinalMeta");return i||(i=new ve({})),W(i)&&(i=new ve({categories:st(i,function(n){return nt(n)?n.value:n})})),a._ordinalMeta=i,a._extent=a.getSetting("extent")||[0,i.categories.length-1],a}return e.prototype.parse=function(t){return t==null?NaN:R(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),At(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),kt(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(Pt(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],a=this._extent,i=a[0];i<=a[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],n=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,a.length);o<l;++o){var u=a[o];i[o]=u,n[u]=o}for(var h=0;o<s;++o){for(;n[h]!=null;)h++;i.push(h),n[h]=o}},e.prototype._getTickNumber=function(t){var a=this._ticksByOrdinalNumber;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getRawOrdinalNumber=function(t){var a=this._ordinalNumbersByTick;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var a=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[a];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(q);q.registerClass(ua);const ha=ua;var et=Q,fa=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return At(t,this._extent)},e.prototype.normalize=function(t){return kt(t,this._extent)},e.prototype.scale=function(t){return Pt(t,this._extent)},e.prototype.setExtent=function(t,a){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(a)||(i[1]=parseFloat(a))},e.prototype.unionExtent=function(t){var a=this._extent;t[0]<a[0]&&(a[0]=t[0]),t[1]>a[1]&&(a[1]=t[1]),this.setExtent(a[0],a[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=la(t)},e.prototype.getTicks=function(t){var a=this._interval,i=this._extent,n=this._niceExtent,o=this._intervalPrecision,s=[];if(!a)return s;var l=1e4;i[0]<n[0]&&(t?s.push({value:et(n[0]-a,o)}):s.push({value:i[0]}));for(var u=n[0];u<=n[1]&&(s.push({value:u}),u=et(u+a,o),u!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:n[1];return i[1]>h&&(t?s.push({value:et(h+a,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var a=this.getTicks(!0),i=[],n=this.getExtent(),o=1;o<a.length;o++){for(var s=a[o],l=a[o-1],u=0,h=[],f=s.value-l.value,v=f/t;u<t-1;){var c=et(l.value+(u+1)*v);c>n[0]&&c<n[1]&&h.push(c),u++}i.push(h)}return i},e.prototype.getLabel=function(t,a){if(t==null)return"";var i=a&&a.precision;i==null?i=Yt(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var n=et(t.value,i,!0);return Oa(n)},e.prototype.calcNiceTicks=function(t,a,i){t=t||5;var n=this._extent,o=n[1]-n[0];if(isFinite(o)){o<0&&(o=-o,n.reverse());var s=Tr(n,t,a,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var i=Math.abs(a[0]);t.fixMax||(a[1]+=i/2),a[0]-=i/2}else a[1]=1;var n=a[1]-a[0];isFinite(n)||(a[0]=0,a[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(a[0]=et(Math.floor(a[0]/o)*o)),t.fixMax||(a[1]=et(Math.ceil(a[1]/o)*o))},e.prototype.setNiceExtent=function(t,a){this._niceExtent=[t,a]},e.type="interval",e}(q);q.registerClass(fa);const Lt=fa;var va=typeof Float32Array<"u",Ar=va?Float32Array:Array;function Ot(r){return W(r)?va?new Float32Array(r):r:new Ar(r)}var kr="__ec_stack_";function Kt(r){return r.get("stack")||kr+r.seriesIndex}function Ut(r){return r.dim+r.index}function ca(r,e){var t=[];return e.eachSeriesByType(r,function(a){ga(a)&&t.push(a)}),t}function Pr(r){var e={};w(r,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var f=l.getData(),v=h.dim+"_"+h.index,c=f.getDimensionIndex(f.mapDimension(h.dim)),d=f.getStore(),p=0,m=d.count();p<m;++p){var g=d.get(c,p);e[v]?e[v].push(g):e[v]=[g]}});var t={};for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];if(i){i.sort(function(l,u){return l-u});for(var n=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(n=n===null?s:Math.min(n,s))}t[a]=n}}return t}function da(r){var e=Pr(r),t=[];return w(r,function(a){var i=a.coordinateSystem,n=i.getBaseAxis(),o=n.getExtent(),s;if(n.type==="category")s=n.getBandWidth();else if(n.type==="value"||n.type==="time"){var l=n.dim+"_"+n.index,u=e[l],h=Math.abs(o[1]-o[0]),f=n.scale.getExtent(),v=Math.abs(f[1]-f[0]);s=u?h/v*u:h}else{var c=a.getData();s=Math.abs(o[1]-o[0])/c.count()}var d=rt(a.get("barWidth"),s),p=rt(a.get("barMaxWidth"),s),m=rt(a.get("barMinWidth")||(pa(a)?.5:1),s),g=a.get("barGap"),y=a.get("barCategoryGap");t.push({bandWidth:s,barWidth:d,barMaxWidth:p,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:Ut(n),stackId:Kt(a)})}),Lr(t)}function Lr(r){var e={};w(r,function(a,i){var n=a.axisKey,o=a.bandWidth,s=e[n]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[n]=s;var u=a.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=a.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var f=a.barMaxWidth;f&&(l[u].maxWidth=f);var v=a.barMinWidth;v&&(l[u].minWidth=v);var c=a.barGap;c!=null&&(s.gap=c);var d=a.barCategoryGap;d!=null&&(s.categoryGap=d)});var t={};return w(e,function(a,i){t[i]={};var n=a.stacks,o=a.bandWidth,s=a.categoryGap;if(s==null){var l=He(n).length;s=Math.max(35-l*4,15)+"%"}var u=rt(s,o),h=rt(a.gap,1),f=a.remainedWidth,v=a.autoWidthCount,c=(f-u)/(v+(v-1)*h);c=Math.max(c,0),w(n,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var _=g.width;y&&(_=Math.min(_,y)),x&&(_=Math.max(_,x)),g.width=_,f-=_+h*_,v--}else{var _=c;y&&y<_&&(_=Math.min(y,f)),x&&x>_&&(_=x),_!==c&&(g.width=_,f-=_+h*_,v--)}}),c=(f-u)/(v+(v-1)*h),c=Math.max(c,0);var d=0,p;w(n,function(g,y){g.width||(g.width=c),p=g,d+=g.width*(1+h)}),p&&(d-=p.width*h);var m=-d/2;w(n,function(g,y){t[i][y]=t[i][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+h)})}),t}function Ir(r,e,t){if(r&&e){var a=r[Ut(e)];return a!=null&&t!=null?a[Kt(t)]:a}}function Sn(r,e){var t=ca(r,e),a=da(t);w(t,function(i){var n=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=Kt(i),u=a[Ut(s)][l],h=u.offset,f=u.width;n.setLayout({bandWidth:u.bandWidth,offset:h,size:f})})}function Mn(r){return{seriesType:r,plan:Ba(),reset:function(e){if(ga(e)){var t=e.getData(),a=e.coordinateSystem,i=a.getBaseAxis(),n=a.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(n.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),u=t.mapDimension(n.dim),h=t.getCalculationInfo("stackResultDimension"),f=oa(t,u)&&!!t.getCalculationInfo("stackedOnSeries"),v=n.isHorizontal(),c=Dr(i,n),d=pa(e),p=e.get("barMinHeight")||0,m=h&&t.getDimensionIndex(h),g=t.getLayout("size"),y=t.getLayout("offset");return{progress:function(x,_){for(var T=x.count,k=d&&Ot(T*3),A=d&&l&&Ot(T*3),S=d&&Ot(T),P=a.master.getRect(),M=v?P.width:P.height,b,C=_.getStore(),L=0;(b=x.next())!=null;){var D=C.get(f?m:o,b),I=C.get(s,b),N=c,V=void 0;f&&(V=+D-C.get(o,b));var O=void 0,B=void 0,E=void 0,Y=void 0;if(v){var lt=a.dataToPoint([D,I]);if(f){var It=a.dataToPoint([V,I]);N=It[0]}O=N,B=lt[1]+y,E=lt[0]-N,Y=g,Math.abs(E)<p&&(E=(E<0?-1:1)*p)}else{var lt=a.dataToPoint([I,D]);if(f){var It=a.dataToPoint([I,V]);N=It[1]}O=lt[0]+y,B=N,E=g,Y=lt[1]-N,Math.abs(Y)<p&&(Y=(Y<=0?-1:1)*p)}d?(k[L]=O,k[L+1]=B,k[L+2]=v?E:Y,A&&(A[L]=v?P.x:O,A[L+1]=v?B:P.y,A[L+2]=M),S[b]=b):_.setItemLayout(b,{x:O,y:B,width:E,height:Y}),L+=3}d&&_.setLayout({largePoints:k,largeDataIndices:S,largeBackgroundPoints:A,valueAxisHorizontal:v})}}}}}}function ga(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function pa(r){return r.pipelineContext&&r.pipelineContext.large}function Dr(r,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var Or=function(r,e,t,a){for(;t<a;){var i=t+a>>>1;r[i][1]<e?t=i+1:a=i}return t},ma=function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="time",a}return e.prototype.getLabel=function(t){var a=this.getSetting("useUTC");return ze(t.value,ee[Na(ht(this._minLevelUnit))]||ee.second,a,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,a,i){var n=this.getSetting("useUTC"),o=this.getSetting("locale");return Ea(t,a,i,o,n)},e.prototype.getTicks=function(){var t=this._interval,a=this._extent,i=[];if(!t)return i;i.push({value:a[0],level:0});var n=this.getSetting("useUTC"),o=Wr(this._minLevelUnit,this._approxInterval,n,a);return i=i.concat(o),i.push({value:a[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1]&&(a[0]-=G,a[1]+=G),a[1]===-1/0&&a[0]===1/0){var i=new Date;a[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),a[0]=a[1]-G}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,a,i){t=t||10;var n=this._extent,o=n[1]-n[0];this._approxInterval=o/t,a!=null&&this._approxInterval<a&&(this._approxInterval=a),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=pt.length,l=Math.min(Or(pt,this._approxInterval,0,s),s-1);this._interval=pt[l][1],this._minLevelUnit=pt[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return We(t)?t:+Rt(t)},e.prototype.contain=function(t){return At(this.parse(t),this._extent)},e.prototype.normalize=function(t){return kt(this.parse(t),this._extent)},e.prototype.scale=function(t){return Pt(t,this._extent)},e.type="time",e}(Lt),pt=[["second",Fe],["minute",Ge],["hour",_t],["quarter-day",_t*6],["half-day",_t*12],["day",G*1.2],["half-week",G*3.5],["week",G*7],["month",G*31],["quarter",G*95],["half-year",ae/2],["year",ae]];function Br(r,e,t,a){var i=Rt(e),n=Rt(t),o=function(d){return ie(i,d,a)===ie(n,d,a)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},h=function(){return u()&&o("hour")},f=function(){return h()&&o("minute")},v=function(){return f()&&o("second")},c=function(){return v()&&o("millisecond")};switch(r){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return f();case"second":return v();case"millisecond":return c()}}function Nr(r,e){return r/=G,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function Er(r){var e=30*G;return r/=e,r>6?6:r>3?3:r>2?2:1}function Rr(r){return r/=_t,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function de(r,e){return r/=e?Ge:Fe,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function Hr(r){return Re(r,!0)}function zr(r,e,t){var a=new Date(r);switch(ht(e)){case"year":case"month":a[qe(t)](0);case"day":a[Ze(t)](1);case"hour":a[$e(t)](0);case"minute":a[Xe(t)](0);case"second":a[Ve(t)](0),a[Ye(t)](0)}return a.getTime()}function Wr(r,e,t,a){var i=1e4,n=Ha,o=0;function s(M,b,C,L,D,I,N){for(var V=new Date(b),O=b,B=V[L]();O<C&&O<=a[1];)N.push({value:O}),B+=M,V[D](B),O=V.getTime();N.push({value:O,notAdd:!0})}function l(M,b,C){var L=[],D=!b.length;if(!Br(ht(M),a[0],a[1],t)){D&&(b=[{value:zr(new Date(a[0]),M,t)},{value:a[1]}]);for(var I=0;I<b.length-1;I++){var N=b[I].value,V=b[I+1].value;if(N!==V){var O=void 0,B=void 0,E=void 0,Y=!1;switch(M){case"year":O=Math.max(1,Math.round(e/G/365)),B=Xa(t),E=$a(t);break;case"half-year":case"quarter":case"month":O=Er(e),B=Ya(t),E=qe(t);break;case"week":case"half-week":case"day":O=Nr(e),B=Va(t),E=Ze(t),Y=!0;break;case"half-day":case"quarter-day":case"hour":O=Rr(e),B=Ga(t),E=$e(t);break;case"minute":O=de(e,!0),B=Fa(t),E=Xe(t);break;case"second":O=de(e,!1),B=Wa(t),E=Ve(t);break;case"millisecond":O=Hr(e),B=za(t),E=Ye(t);break}s(O,N,V,B,E,Y,L),M==="year"&&C.length>1&&I===0&&C.unshift({value:C[0].value-O})}}for(var I=0;I<L.length;I++)C.push(L[I]);return L}}for(var u=[],h=[],f=0,v=0,c=0;c<n.length&&o++<i;++c){var d=ht(n[c]);if(Ra(n[c])){l(n[c],u[u.length-1]||[],h);var p=n[c+1]?ht(n[c+1]):null;if(d!==p){if(h.length){v=f,h.sort(function(M,b){return M.value-b.value});for(var m=[],g=0;g<h.length;++g){var y=h[g].value;(g===0||h[g-1].value!==y)&&(m.push(h[g]),y>=a[0]&&y<=a[1]&&f++)}var x=(a[1]-a[0])/e;if(f>x*1.5&&v>x/1.5||(u.push(m),f>x||r===n[c]))break}h=[]}}}for(var _=re(st(u,function(M){return re(M,function(b){return b.value>=a[0]&&b.value<=a[1]&&!b.notAdd})}),function(M){return M.length>0}),T=[],k=_.length-1,c=0;c<_.length;++c)for(var A=_[c],S=0;S<A.length;++S)T.push({value:A[S].value,level:k-c});T.sort(function(M,b){return M.value-b.value});for(var P=[],c=0;c<T.length;++c)(c===0||T[c].value!==T[c-1].value)&&P.push(T[c]);return P}q.registerClass(ma);const Fr=ma;var ge=q.prototype,ft=Lt.prototype,Gr=Q,Vr=Math.floor,Yr=Math.ceil,mt=Math.pow,F=Math.log,Qt=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Lt,t._interval=0,t}return e.prototype.getTicks=function(t){var a=this._originalScale,i=this._extent,n=a.getExtent(),o=ft.getTicks.call(this,t);return st(o,function(s){var l=s.value,u=Q(mt(this.base,l));return u=l===i[0]&&this._fixMin?yt(u,n[0]):u,u=l===i[1]&&this._fixMax?yt(u,n[1]):u,{value:u}},this)},e.prototype.setExtent=function(t,a){var i=F(this.base);t=F(Math.max(0,t))/i,a=F(Math.max(0,a))/i,ft.setExtent.call(this,t,a)},e.prototype.getExtent=function(){var t=this.base,a=ge.getExtent.call(this);a[0]=mt(t,a[0]),a[1]=mt(t,a[1]);var i=this._originalScale,n=i.getExtent();return this._fixMin&&(a[0]=yt(a[0],n[0])),this._fixMax&&(a[1]=yt(a[1],n[1])),a},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var a=this.base;t[0]=F(t[0])/F(a),t[1]=F(t[1])/F(a),ge.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.calcNiceTicks=function(t){t=t||10;var a=this._extent,i=a[1]-a[0];if(!(i===1/0||i<=0)){var n=Za(i),o=t/i*n;for(o<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&Math.abs(n)>0;)n*=10;var s=[Q(Yr(a[0]/n)*n),Q(Vr(a[1]/n)*n)];this._interval=n,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){ft.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=F(t)/F(this.base),At(t,this._extent)},e.prototype.normalize=function(t){return t=F(t)/F(this.base),kt(t,this._extent)},e.prototype.scale=function(t){return t=Pt(t,this._extent),mt(this.base,t)},e.type="log",e}(q),ya=Qt.prototype;ya.getMinorTicks=ft.getMinorTicks;ya.getLabel=ft.getLabel;function yt(r,e){return Gr(r,Yt(e))}q.registerClass(Qt);const Xr=Qt;var $r=function(){function r(e,t,a){this._prepareParams(e,t,a)}return r.prototype._prepareParams=function(e,t,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var n=this._modelMinRaw=t.get("min",!0);tt(n)?this._modelMinNum=xt(e,n({min:a[0],max:a[1]})):n!=="dataMin"&&(this._modelMinNum=xt(e,n));var o=this._modelMaxRaw=t.get("max",!0);if(tt(o)?this._modelMaxNum=xt(e,o({min:a[0],max:a[1]})):o!=="dataMax"&&(this._modelMaxNum=xt(e,o)),i)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),l=W(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ne(l[0],1),ne(l[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,a=this._dataMax,i=this._axisDataLen,n=this._boundaryGapInner,o=e?null:a-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,u=s!=null,h=l!=null;s==null&&(s=e?i?0:NaN:t-n[0]*o),l==null&&(l=e?i?i-1:NaN:a+n[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=Ht(s)||Ht(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!h&&(l=0));var v=this._determinedMin,c=this._determinedMax;return v!=null&&(s=v,u=!0),c!=null&&(l=c,h=!0),{min:s,max:l,minFixed:u,maxFixed:h,isBlank:f}},r.prototype.modifyDataMinMax=function(e,t){this[qr[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var a=Zr[e];this[a]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),Zr={min:"_determinedMin",max:"_determinedMax"},qr={min:"_dataMin",max:"_dataMax"};function Kr(r,e,t){var a=r.rawExtentInfo;return a||(a=new $r(r,e,t),r.rawExtentInfo=a,a)}function xt(r,e){return e==null?null:Ht(e)?NaN:r.parse(e)}function Ur(r,e){var t=r.type,a=Kr(r,e,r.getExtent()).calculate();r.setBlank(a.isBlank);var i=a.min,n=a.max,o=e.ecModel;if(o&&t==="time"){var s=ca("bar",o),l=!1;if(w(s,function(f){l=l||f.getBaseAxis()===e.axis}),l){var u=da(s),h=Qr(i,n,e,u);i=h.min,n=h.max}}return{extent:[i,n],fixMin:a.minFixed,fixMax:a.maxFixed}}function Qr(r,e,t,a){var i=t.axis.getExtent(),n=i[1]-i[0],o=Ir(a,t.axis);if(o===void 0)return{min:r,max:e};var s=1/0;w(o,function(c){s=Math.min(c.offset,s)});var l=-1/0;w(o,function(c){l=Math.max(c.offset+c.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=e-r,f=1-(s+l)/n,v=h/f-h;return e+=v*(l/u),r-=v*(s/u),{min:r,max:e}}function Tn(r,e){var t=e,a=Ur(r,t),i=a.extent,n=t.get("splitNumber");r instanceof Xr&&(r.base=t.get("logBase"));var o=r.type,s=t.get("interval"),l=o==="interval"||o==="time";r.setExtent(i[0],i[1]),r.calcNiceExtent({splitNumber:n,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&r.setInterval&&r.setInterval(s)}function Cn(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new ha({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new Fr({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(q.getClass(e)||Lt)}}function An(r){var e=r.scale.getExtent(),t=e[0],a=e[1];return!(t>0&&a>0||t<0&&a<0)}function jr(r){var e=r.getLabelModel().get("formatter"),t=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(a){return function(i,n){return r.scale.getFormattedLabel(i,n,a)}}(e):R(e)?function(a){return function(i){var n=r.scale.getLabel(i),o=a.replace("{value}",n??"");return o}}(e):tt(e)?function(a){return function(i,n){return t!=null&&(n=i.value-t),a(jt(r,i),n,i.level!=null?{level:i.level}:null)}}(e):function(a){return r.scale.getLabel(a)}}function jt(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function kn(r){var e=r.model,t=r.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var a,i,n=t.getExtent();t instanceof ha?i=t.count():(a=t.getTicks(),i=a.length);var o=r.getLabelModel(),s=jr(r),l,u=1;i>40&&(u=Math.ceil(i/40));for(var h=0;h<i;h+=u){var f=a?a[h]:{value:n[0]+h},v=s(f,h),c=o.getTextRect(v),d=Jr(c,o.get("rotate")||0);l?l.union(d):l=d}return l}}function Jr(r,e){var t=e*Math.PI/180,a=r.width,i=r.height,n=a*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=a*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new Ke(r.x,r.y,n,o);return s}function ti(r){var e=r.get("interval");return e??"auto"}function ei(r){return r.type==="category"&&ti(r.getLabelModel())===0}function ai(r,e){var t={};return w(r.mapDimensionsAll(e),function(a){t[br(r,a)]=!0}),He(t)}function Pn(r,e,t){e&&w(ai(e,t),function(a){var i=e.getApproximateExtent(a);i[0]<r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1])})}function ri(r){for(var e=[],t=0;t<r.length;t++){var a=r[t];if(!a.defaultAttr.ignore){var i=a.label,n=i.getComputedTransform(),o=i.getBoundingRect(),s=!n||n[1]<1e-5&&n[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(n),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new zt(o,n):null;e.push({label:i,labelLine:a.labelLine,rect:u,localRect:o,obb:h,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:s,transform:n})}}return e}function ii(r,e,t,a,i,n){var o=r.length;if(o<2)return;r.sort(function(S,P){return S.rect[e]-P.rect[e]});for(var s=0,l,u=!1,h=0,f=0;f<o;f++){var v=r[f],c=v.rect;l=c[e]-s,l<0&&(c[e]-=l,v.label[e]-=l,u=!0);var d=Math.max(-l,0);h+=d,s=c[e]+c[t]}h>0&&n&&T(-h/o,0,o);var p=r[0],m=r[o-1],g,y;x(),g<0&&k(-g,.8),y<0&&k(y,.8),x(),_(g,y,1),_(y,g,-1),x(),g<0&&A(-g),y<0&&A(y);function x(){g=p.rect[e]-a,y=i-m.rect[e]-m.rect[t]}function _(S,P,M){if(S<0){var b=Math.min(P,-S);if(b>0){T(b*M,0,o);var C=b+S;C<0&&k(-C*M,1)}else k(-S*M,1)}}function T(S,P,M){S!==0&&(u=!0);for(var b=P;b<M;b++){var C=r[b],L=C.rect;L[e]+=S,C.label[e]+=S}}function k(S,P){for(var M=[],b=0,C=1;C<o;C++){var L=r[C-1].rect,D=Math.max(r[C].rect[e]-L[e]-L[t],0);M.push(D),b+=D}if(b){var I=Math.min(Math.abs(S)/b,P);if(S>0)for(var C=0;C<o-1;C++){var N=M[C]*I;T(N,0,C+1)}else for(var C=o-1;C>0;C--){var N=M[C-1]*I;T(-N,C,o)}}}function A(S){var P=S<0?-1:1;S=Math.abs(S);for(var M=Math.ceil(S/(o-1)),b=0;b<o-1;b++)if(P>0?T(M,0,b+1):T(-M,o-b-1,o),S-=M,S<=0)return}return u}function Ln(r,e,t,a){return ii(r,"y","height",e,t,a)}function ni(r){var e=[];r.sort(function(p,m){return m.priority-p.priority});var t=new Ke(0,0,0,0);function a(p){if(!p.ignore){var m=p.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}p.ignore=!0}for(var i=0;i<r.length;i++){var n=r[i],o=n.axisAligned,s=n.localRect,l=n.transform,u=n.label,h=n.labelLine;t.copy(n.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var f=n.obb,v=!1,c=0;c<e.length;c++){var d=e[c];if(t.intersect(d.rect)){if(o&&d.axisAligned){v=!0;break}if(d.obb||(d.obb=new zt(d.localRect,d.transform)),f||(f=new zt(s,l)),f.intersect(d.obb)){v=!0;break}}}v?(a(u),h&&a(h)):(u.attr("ignore",n.defaultAttr.ignore),h&&h.attr("ignore",n.defaultAttr.labelGuideIgnore),e.push(n))}}function pe(r,e,t){t=t||{};var a=r.coordinateSystem,i=e.axis,n={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,h=a.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],v={left:0,right:1,top:0,bottom:1,onZero:2},c=e.get("offset")||0,d=u==="x"?[f[2]-c,f[3]+c]:[f[0]-c,f[1]+c];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));d[v.onZero]=Math.max(Math.min(p,d[1]),d[0])}n.position=[u==="y"?d[v[l]]:f[0],u==="x"?d[v[l]]:f[3]],n.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=m[s],n.labelOffset=o?d[v[s]]-d[v.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),vt(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var g=e.get(["axisLabel","rotate"]);return n.labelRotate=l==="top"?-g:g,n.z2=1,n}function In(r){return r.get("coordinateSystem")==="cartesian2d"}function Dn(r){var e={xAxisModel:null,yAxisModel:null};return w(e,function(t,a){var i=a.replace(/Model$/,""),n=r.getReferringComponents(i,qa).models[0];e[a]=n}),e}var U=Math.PI,it=function(){function r(e,t){this.group=new Wt,this.opt=t,this.axisModel=e,ct(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var a=new Wt({x:t.position[0],y:t.position[1],rotation:t.rotation});a.updateTransform(),this._transformGroup=a}return r.prototype.hasBuilder=function(e){return!!me[e]},r.prototype.add=function(e){me[e](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(e,t,a){var i=Je(t-e),n,o;return Mt(i)?(o=a>0?"top":"bottom",n="center"):Mt(i-U)?(o=a>0?"bottom":"top",n="center"):(o="middle",i>0&&i<U?n=a>0?"right":"left":n=a>0?"left":"right"),{rotation:i,textAlign:n,textVerticalAlign:o}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r}(),me={axisLine:function(r,e,t,a){var i=e.get(["axisLine","show"]);if(i==="auto"&&r.handleAutoShown&&(i=r.handleAutoShown("axisLine")),!!i){var n=e.axis.getExtent(),o=a.transform,s=[n[0],0],l=[n[1],0],u=s[0]>l[0];o&&(wt(s,s,o),wt(l,l,o));var h=St({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Ue({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});Qe(f.shape,f.style.lineWidth),f.anid="line",t.add(f);var v=e.get(["axisLine","symbol"]);if(v!=null){var c=e.get(["axisLine","symbolSize"]);R(v)&&(v=[v,v]),(R(c)||We(c))&&(c=[c,c]);var d=Ka(e.get(["axisLine","symbolOffset"])||0,c),p=c[0],m=c[1];w([{rotate:r.rotation+Math.PI/2,offset:d[0],r:0},{rotate:r.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,y){if(v[y]!=="none"&&v[y]!=null){var x=Ua(v[y],-p/2,-m/2,p,m,h.stroke,!0),_=g.r+g.offset,T=u?l:s;x.attr({rotation:g.rotate,x:T[0]+_*Math.cos(r.rotation),y:T[1]-_*Math.sin(r.rotation),silent:!0,z2:11}),t.add(x)}})}}},axisTickLabel:function(r,e,t,a){var i=li(t,a,e,r),n=hi(t,a,e,r);if(si(e,n,i),ui(t,a,e,r.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=ri(st(n,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));ni(o)}},axisName:function(r,e,t,a){var i=vt(r.axisName,e.get("name"));if(i){var n=e.get("nameLocation"),o=r.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),h=u[0]>u[1]?-1:1,f=[n==="start"?u[0]-h*l:n==="end"?u[1]+h*l:(u[0]+u[1])/2,xe(n)?r.labelOffset+o*l:0],v,c=e.get("nameRotate");c!=null&&(c=c*U/180);var d;xe(n)?v=it.innerTextLayout(r.rotation,c??r.rotation,o):(v=oi(r.rotation,n,c||0,u),d=r.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(v.rotation)),!isFinite(d)&&(d=null)));var p=s.getFont(),m=e.get("nameTruncate",!0)||{},g=m.ellipsis,y=vt(r.nameTruncateMaxWidth,m.maxWidth,d),x=new Ct({x:f[0],y:f[1],rotation:v.rotation,silent:it.isLabelSilent(e),style:Xt(s,{text:i,font:p,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||v.textAlign,verticalAlign:s.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(Qa({el:x,componentModel:e,itemName:i}),x.__fullText=i,x.anid="name",e.get("triggerEvent")){var _=it.makeAxisEventDataBase(e);_.targetType="axisName",_.name=i,$(x).eventData=_}a.add(x),x.updateTransform(),t.add(x),x.decomposeTransform()}}};function oi(r,e,t,a){var i=Je(t-r),n,o,s=a[0]>a[1],l=e==="start"&&!s||e!=="start"&&s;return Mt(i-U/2)?(o=l?"bottom":"top",n="center"):Mt(i-U*1.5)?(o=l?"top":"bottom",n="center"):(o="middle",i<U*1.5&&i>U/2?n=l?"left":"right":n=l?"right":"left"),{rotation:i,textAlign:n,textVerticalAlign:o}}function si(r,e,t){if(!ei(r.axis)){var a=r.get(["axisLabel","showMinLabel"]),i=r.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var n=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=t[0],h=t[1],f=t[t.length-1],v=t[t.length-2];a===!1?(z(n),z(u)):ye(n,o)&&(a?(z(o),z(h)):(z(n),z(u))),i===!1?(z(s),z(f)):ye(l,s)&&(i?(z(l),z(v)):(z(s),z(f)))}}function z(r){r&&(r.ignore=!0)}function ye(r,e){var t=r&&r.getBoundingRect().clone(),a=e&&e.getBoundingRect().clone();if(!(!t||!a)){var i=ja([]);return je(i,i,-r.rotation),t.applyTransform(oe([],i,r.getLocalTransform())),a.applyTransform(oe([],i,e.getLocalTransform())),t.intersect(a)}}function xe(r){return r==="middle"||r==="center"}function xa(r,e,t,a,i){for(var n=[],o=[],s=[],l=0;l<r.length;l++){var u=r[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=t,e&&(wt(o,o,e),wt(s,s,e));var h=new Ue({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:a,z2:2,autoBatch:!0,silent:!0});Qe(h.shape,h.style.lineWidth),h.anid=i+"_"+r[l].tickValue,n.push(h)}return n}function li(r,e,t,a){var i=t.axis,n=t.getModel("axisTick"),o=n.get("show");if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=n.getModel("lineStyle"),l=a.tickDirection*n.get("length"),u=i.getTicksCoords(),h=xa(u,e.transform,l,ct(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<h.length;f++)r.add(h[f]);return h}}function ui(r,e,t,a){var i=t.axis,n=t.getModel("minorTick");if(!(!n.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=n.getModel("lineStyle"),l=a*n.get("length"),u=ct(s.getLineStyle(),ct(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var f=xa(o[h],e.transform,l,u,"minorticks_"+h),v=0;v<f.length;v++)r.add(f[v])}}function hi(r,e,t,a){var i=t.axis,n=vt(a.axisLabelShow,t.get(["axisLabel","show"]));if(!(!n||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(vt(a.labelRotate,o.get("rotate"))||0)*U/180,h=it.innerTextLayout(a.rotation,u,a.labelDirection),f=t.getCategories&&t.getCategories(!0),v=[],c=it.isLabelSilent(t),d=t.get("triggerEvent");return w(l,function(p,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,x=p.rawLabel,_=o;if(f&&f[g]){var T=f[g];nt(T)&&T.textStyle&&(_=new ot(T.textStyle,o,t.ecModel))}var k=_.getTextColor()||t.get(["axisLine","lineStyle","color"]),A=i.dataToCoord(g),S=_.getShallow("align",!0)||h.textAlign,P=gt(_.getShallow("alignMinLabel",!0),S),M=gt(_.getShallow("alignMaxLabel",!0),S),b=_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||h.textVerticalAlign,C=gt(_.getShallow("verticalAlignMinLabel",!0),b),L=gt(_.getShallow("verticalAlignMaxLabel",!0),b),D=new Ct({x:A,y:a.labelOffset+a.labelDirection*s,rotation:h.rotation,silent:c,z2:10+(p.level||0),style:Xt(_,{text:y,align:m===0?P:m===l.length-1?M:S,verticalAlign:m===0?C:m===l.length-1?L:b,fill:tt(k)?k(i.type==="category"?x:i.type==="value"?g+"":g,m):k})});if(D.anid="label_"+g,d){var I=it.makeAxisEventDataBase(t);I.targetType="axisLabel",I.value=x,I.tickIndex=m,i.type==="category"&&(I.dataIndex=g),$(D).eventData=I}e.add(D),D.updateTransform(),v.push(D),r.add(D),D.decomposeTransform()}),v}}const fi=it;function vi(r,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return ci(t,r,e),t.seriesInvolved&&gi(t,r),t}function ci(r,e,t){var a=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),n=i.get("link",!0)||[],o=[];w(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=dt(s.model),u=r.coordSysAxesInfo[l]={};r.coordSysMap[l]=s;var h=s.model,f=h.getModel("tooltip",a);if(w(s.getAxes(),j(p,!1,null)),s.getTooltipAxes&&a&&f.get("show")){var v=f.get("trigger")==="axis",c=f.get(["axisPointer","type"])==="cross",d=s.getTooltipAxes(f.get(["axisPointer","axis"]));(v||c)&&w(d.baseAxes,j(p,c?"cross":!0,v)),c&&w(d.otherAxes,j(p,"cross",!1))}function p(m,g,y){var x=y.model.getModel("axisPointer",i),_=x.get("show");if(!(!_||_==="auto"&&!m&&!Gt(x))){g==null&&(g=x.get("triggerTooltip")),x=m?di(y,f,i,e,m,g):x;var T=x.get("snap"),k=x.get("triggerEmphasis"),A=dt(y.model),S=g||T||y.type==="category",P=r.axesInfo[A]={key:A,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:k,involveSeries:S,snap:T,useHandle:Gt(x),seriesModels:[],linkGroup:null};u[A]=P,r.seriesInvolved=r.seriesInvolved||S;var M=pi(n,y);if(M!=null){var b=o[M]||(o[M]={axesInfo:{}});b.axesInfo[A]=P,b.mapper=n[M].mapper,P.linkGroup=b}}}})}function di(r,e,t,a,i,n){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};w(s,function(v){l[v]=$t(o.get(v))}),l.snap=r.type!=="category"&&!!n,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!n){var f=l.lineStyle=o.get("crossStyle");f&&ct(u,f.textStyle)}}return r.model.getModel("axisPointer",new ot(l,t,a))}function gi(r,e){e.eachSeries(function(t){var a=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),n=t.get(["tooltip","show"],!0);!a||i==="none"||i===!1||i==="item"||n===!1||t.get(["axisPointer","show"],!0)===!1||w(r.coordSysAxesInfo[dt(a.model)],function(o){var s=o.axis;a.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function pi(r,e){for(var t=e.model,a=e.dim,i=0;i<r.length;i++){var n=r[i]||{};if(Bt(n[a+"AxisId"],t.id)||Bt(n[a+"AxisIndex"],t.componentIndex)||Bt(n[a+"AxisName"],t.name))return i}}function Bt(r,e){return r==="all"||W(r)&&ta(r,e)>=0||r===e}function mi(r){var e=Jt(r);if(e){var t=e.axisPointerModel,a=e.axis.scale,i=t.option,n=t.get("status"),o=t.get("value");o!=null&&(o=a.parse(o));var s=Gt(t);n==null&&(i.status=s?"show":"hide");var l=a.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function Jt(r){var e=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[dt(r)]}function yi(r){var e=Jt(r);return e&&e.axisPointerModel}function Gt(r){return!!r.get(["handle","show"])}function dt(r){return r.type+"||"+r.id}var _e={},xi=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,i,n){this.axisPointerClass&&mi(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,a,i,n){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,a){var i=this._axisPointer;i&&i.remove(a)},e.prototype.dispose=function(t,a){this._disposeAxisPointer(a),r.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,a,i){var n=e.getAxisPointerClass(this.axisPointerClass);if(n){var o=yi(t);o?(this._axisPointer||(this._axisPointer=new n)).render(t,o,a,i):this._disposeAxisPointer(a)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,a){_e[t]=a},e.getAxisPointerClass=function(t){return t&&_e[t]},e.type="axis",e}(Zt);const _i=xi;var at=qt(),be=$t,Nt=J,bi=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(e,t,a,i){var n=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=a,!(!i&&this._lastValue===n&&this._lastStatus===o)){this._lastValue=n,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,n,e,t,a);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=h;var f=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new Wt,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),a.getZr().add(s);else{var v=j(we,t,f);this.updatePointerEl(s,u,v),this.updateLabelEl(s,u,v,t)}Me(s,t,!0),this._renderHandle(n)}},r.prototype.remove=function(e){this.clear(e)},r.prototype.dispose=function(e){this.clear(e)},r.prototype.determineAnimation=function(e,t){var a=t.get("animation"),i=e.axis,n=i.type==="category",o=t.get("snap");if(!o&&!n)return!1;if(a==="auto"||a==null){var s=this.animationThreshold;if(n&&i.getBandWidth()>s)return!0;if(o){var l=Jt(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return a===!0},r.prototype.makeElOption=function(e,t,a,i,n){},r.prototype.createPointerEl=function(e,t,a,i){var n=t.pointer;if(n){var o=at(e).pointerEl=new Ja[n.type](be(t.pointer));e.add(o)}},r.prototype.createLabelEl=function(e,t,a,i){if(t.label){var n=at(e).labelEl=new Ct(be(t.label));e.add(n),Se(n,i)}},r.prototype.updatePointerEl=function(e,t,a){var i=at(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),a(i,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(e,t,a,i){var n=at(e).labelEl;n&&(n.setStyle(t.label.style),a(n,{x:t.label.x,y:t.label.y}),Se(n,i))},r.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,a=this._api.getZr(),i=this._handle,n=t.getModel("handle"),o=t.get("status");if(!n.get("show")||!o||o==="hide"){i&&a.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=tr(n.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){er(u.event)},onmousedown:Nt(this._onHandleDragMove,this,0,0),drift:Nt(this._onHandleDragMove,this),ondragend:Nt(this._onHandleDragEnd,this)}),a.add(i)),Me(i,t,!1),i.setStyle(n.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=n.get("size");W(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,ea(this,"_doDispatchAxisPointer",n.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},r.prototype._moveHandleToValue=function(e,t){we(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Et(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(e,t){var a=this._handle;if(a){this._dragging=!0;var i=this.updateHandleTransform(Et(a),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,a.stopAnimation(),a.attr(Et(i)),at(a).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),a=this._group,i=this._handle;t&&a&&(this._lastGraphicKey=null,a&&t.remove(a),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),Ft(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(e,t,a){return a=a||0,{x:e[a],y:e[1-a],width:t[a],height:t[1-a]}},r}();function we(r,e,t,a){_a(at(t).lastProp,a)||(at(t).lastProp=a,e?ar(t,a,r):(t.stopAnimation(),t.attr(a)))}function _a(r,e){if(nt(r)&&nt(e)){var t=!0;return w(e,function(a,i){t=t&&_a(r[i],a)}),!!t}else return r===e}function Se(r,e){r[e.get(["label","show"])?"show":"hide"]()}function Et(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function Me(r,e,t){var a=e.get("z"),i=e.get("zlevel");r&&r.traverse(function(n){n.type!=="group"&&(a!=null&&(n.z=a),i!=null&&(n.zlevel=i),n.silent=t)})}const wi=bi;function Si(r){var e=r.get("type"),t=r.getModel(e+"Style"),a;return e==="line"?(a=t.getLineStyle(),a.fill=null):e==="shadow"&&(a=t.getAreaStyle(),a.stroke=null),a}function Mi(r,e,t,a,i){var n=t.get("value"),o=ba(n,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=aa(s.get("padding")||0),u=s.getFont(),h=nr(o,u),f=i.position,v=h.width+l[1]+l[3],c=h.height+l[0]+l[2],d=i.align;d==="right"&&(f[0]-=v),d==="center"&&(f[0]-=v/2);var p=i.verticalAlign;p==="bottom"&&(f[1]-=c),p==="middle"&&(f[1]-=c/2),Ti(f,v,c,a);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),r.label={x:f[0],y:f[1],style:Xt(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Ti(r,e,t,a){var i=a.getWidth(),n=a.getHeight();r[0]=Math.min(r[0]+e,i)-e,r[1]=Math.min(r[1]+t,n)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function ba(r,e,t,a,i){r=e.scale.parse(r);var n=e.scale.getLabel({value:r},{precision:i.precision}),o=i.formatter;if(o){var s={value:jt(e,{value:r}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};w(a,function(l){var u=t.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,f=u&&u.getDataParams(h);f&&s.seriesData.push(f)}),R(o)?n=o.replace("{value}",n):tt(o)&&(n=o(s))}return n}function wa(r,e,t){var a=or();return je(a,a,t.rotation),rr(a,a,t.position),ir([r.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],a)}function Ci(r,e,t,a,i,n){var o=fi.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),Mi(e,a,i,n,{position:wa(a.axis,r,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Ai(r,e,t){return t=t||0,{x1:r[t],y1:r[1-t],x2:e[t],y2:e[1-t]}}function ki(r,e,t){return t=t||0,{x:r[t],y:r[1-t],width:e[t],height:e[1-t]}}var Pi=function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,a,i,n,o){var s=i.axis,l=s.grid,u=n.get("type"),h=Te(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(a,!0));if(u&&u!=="none"){var v=Si(n),c=Li[u](s,f,h);c.style=v,t.graphicKey=c.type,t.pointer=c}var d=pe(l.model,i);Ci(a,t,d,i,n,o)},e.prototype.getHandleTransform=function(t,a,i){var n=pe(a.axis.grid.model,a,{labelInside:!1});n.labelMargin=i.get(["handle","margin"]);var o=wa(a.axis,t,n);return{x:o[0],y:o[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,a,i,n){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=Te(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,f=[t.x,t.y];f[h]+=a[h],f[h]=Math.min(l[1],f[h]),f[h]=Math.max(l[0],f[h]);var v=(u[1]+u[0])/2,c=[v,v];c[h]=f[h];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:t.rotation,cursorPoint:c,tooltipOption:d[h]}},e}(wi);function Te(r,e){var t={};return t[e.dim+"AxisIndex"]=e.index,r.getCartesian(t)}var Li={line:function(r,e,t){var a=Ai([e,t[0]],[e,t[1]],Ce(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,e,t){var a=Math.max(1,r.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:ki([e-a/2,t[0]],[a,i],Ce(r))}}};function Ce(r){return r.dim==="x"?0:1}const Ii=Pi;var Di=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ra);const Oi=Di;var Z=qt(),Bi=w;function Sa(r,e,t){if(!H.node){var a=e.getZr();Z(a).records||(Z(a).records={}),Ni(a,e);var i=Z(a).records[r]||(Z(a).records[r]={});i.handler=t}}function Ni(r,e){if(Z(r).initialized)return;Z(r).initialized=!0,t("click",j(Ae,"click")),t("mousemove",j(Ae,"mousemove")),t("globalout",Ri);function t(a,i){r.on(a,function(n){var o=Hi(e);Bi(Z(r).records,function(s){s&&i(s,n,o.dispatchAction)}),Ei(o.pendings,e)})}}function Ei(r,e){var t=r.showTip.length,a=r.hideTip.length,i;t?i=r.showTip[t-1]:a&&(i=r.hideTip[a-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Ri(r,e,t){r.handler("leave",null,t)}function Ae(r,e,t,a){e.handler(r,t,a)}function Hi(r){var e={showTip:[],hideTip:[]},t=function(a){var i=e[a.type];i?i.push(a):(a.dispatchAction=t,r.dispatchAction(a))};return{dispatchAction:t,pendings:e}}function Vt(r,e){if(!H.node){var t=e.getZr(),a=(Z(t).records||{})[r];a&&(Z(t).records[r]=null)}}var zi=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,i){var n=a.getComponent("tooltip"),o=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";Sa("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,a){Vt("axisPointer",a)},e.prototype.dispose=function(t,a){Vt("axisPointer",a)},e.type="axisPointer",e}(Zt);const Wi=zi;function Ma(r,e){var t=[],a=r.seriesIndex,i;if(a==null||!(i=e.getSeriesByIndex(a)))return{point:[]};var n=i.getData(),o=sr(n,r);if(o==null||o<0||W(o))return{point:[]};var s=n.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(r.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),f=h.dim,v=u.dim,c=f==="x"||f==="radius"?1:0,d=n.mapDimension(v),p=[];p[c]=n.get(d,o),p[1-c]=n.get(n.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(p)||[]}else t=l.dataToPoint(n.getValues(st(l.dimensions,function(g){return n.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),t=[m.x+m.width/2,m.y+m.height/2]}return{point:t,el:s}}var ke=qt();function Fi(r,e,t){var a=r.currTrigger,i=[r.x,r.y],n=r,o=r.dispatchAction||J(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){bt(i)&&(i=Ma({seriesIndex:n.seriesIndex,dataIndex:n.dataIndex},e).point);var l=bt(i),u=n.axesInfo,h=s.axesInfo,f=a==="leave"||bt(i),v={},c={},d={list:[],map:{}},p={showPointer:j(Vi,c),showTooltip:j(Yi,d)};w(s.coordSysMap,function(g,y){var x=l||g.containPoint(i);w(s.coordSysAxesInfo[y],function(_,T){var k=_.axis,A=qi(u,_);if(!f&&x&&(!u||A)){var S=A&&A.value;S==null&&!l&&(S=k.pointToData(i)),S!=null&&Pe(_,S,p,!1,v)}})});var m={};return w(h,function(g,y){var x=g.linkGroup;x&&!c[y]&&w(x.axesInfo,function(_,T){var k=c[T];if(_!==g&&k){var A=k.value;x.mapper&&(A=g.axis.scale.parse(x.mapper(A,Le(_),Le(g)))),m[g.key]=A}})}),w(m,function(g,y){Pe(h[y],g,p,!0,v)}),Xi(c,h,v),$i(d,i,r,o),Zi(h,o,t),v}}function Pe(r,e,t,a,i){var n=r.axis;if(!(n.scale.isBlank()||!n.containData(e))){if(!r.involveSeries){t.showPointer(r,e);return}var o=Gi(e,r),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&St(i,s[0]),!a&&r.snap&&n.containData(l)&&l!=null&&(e=l),t.showPointer(r,e,s),t.showTooltip(r,o,l)}}function Gi(r,e){var t=e.axis,a=t.dim,i=r,n=[],o=Number.MAX_VALUE,s=-1;return w(e.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(a),f,v;if(l.getAxisTooltipData){var c=l.getAxisTooltipData(h,r,t);v=c.dataIndices,f=c.nestestValue}else{if(v=l.getData().indicesOfNearest(h[0],r,t.type==="category"?.5:null),!v.length)return;f=l.getData().get(h[0],v[0])}if(!(f==null||!isFinite(f))){var d=r-f,p=Math.abs(d);p<=o&&((p<o||d>=0&&s<0)&&(o=p,s=d,i=f,n.length=0),w(v,function(m){n.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:n,snapToValue:i}}function Vi(r,e,t,a){r[e.key]={value:t,payloadBatch:a}}function Yi(r,e,t,a){var i=t.payloadBatch,n=e.axis,o=n.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=dt(l),h=r.map[u];h||(h=r.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},r.list.push(h)),h.dataByAxis.push({axisDim:n.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:a,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Xi(r,e,t){var a=t.axesInfo=[];w(e,function(i,n){var o=i.axisPointerModel.option,s=r[n];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&a.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function $i(r,e,t,a){if(bt(e)||!r.list.length){a({type:"hideTip"});return}var i=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:r.list})}function Zi(r,e,t){var a=t.getZr(),i="axisPointerLastHighlights",n=ke(a)[i]||{},o=ke(a)[i]={};w(r,function(u,h){var f=u.axisPointerModel.option;f.status==="show"&&u.triggerEmphasis&&w(f.seriesDataIndices,function(v){var c=v.seriesIndex+" | "+v.dataIndex;o[c]=v})});var s=[],l=[];w(n,function(u,h){!o[h]&&l.push(u)}),w(o,function(u,h){!n[h]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function qi(r,e){for(var t=0;t<(r||[]).length;t++){var a=r[t];if(e.axis.dim===a.axisDim&&e.axis.model.componentIndex===a.axisIndex)return a}}function Le(r){var e=r.axis.model,t={},a=t.axisDim=r.axis.dim;return t.axisIndex=t[a+"AxisIndex"]=e.componentIndex,t.axisName=t[a+"AxisName"]=e.name,t.axisId=t[a+"AxisId"]=e.id,t}function bt(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function Ki(r){_i.registerAxisPointerClass("CartesianAxisPointer",Ii),r.registerComponentModel(Oi),r.registerComponentView(Wi),r.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!W(t)&&(e.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=vi(e,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Fi)}var Ui=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ra);const Qi=Ui;function Ta(r){var e=r.get("confine");return e!=null?!!e:r.get("renderMode")==="richText"}function Ca(r){if(H.domSupported){for(var e=document.documentElement.style,t=0,a=r.length;t<a;t++)if(r[t]in e)return r[t]}}var Aa=Ca(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ji=Ca(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function ka(r,e){if(!r)return e;e=ia(e,!0);var t=r.indexOf(e);return r=t===-1?e:"-"+r.slice(0,t)+"-"+e,r.toLowerCase()}function Ji(r,e){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?e?t[e]:t:null}var tn=ka(ji,"transition"),te=ka(Aa,"transform"),en="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(H.transform3dSupported?"will-change:transform;":"");function an(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function rn(r,e,t){if(!R(t)||t==="inside")return"";var a=r.get("backgroundColor"),i=r.get("borderWidth");e=Tt(e);var n=an(t),o=Math.max(Math.round(i)*1.5,6),s="",l=te+":",u;ta(["left","right"],n)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=n==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=n==="top"?225:45)+"deg)");var h=u*Math.PI/180,f=o+i,v=f*Math.abs(Math.cos(h))+f*Math.abs(Math.sin(h)),c=Math.round(((v-Math.SQRT2*i)/2+Math.SQRT2*i-(v-f)/2)*100)/100;s+=";"+n+":-"+c+"px";var d=e+" solid "+i+"px;",p=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+d,"border-right:"+d,"background-color:"+a+";"];return'<div style="'+p.join("")+'"></div>'}function nn(r,e){var t="cubic-bezier(0.23,1,0.32,1)",a=" "+r/2+"s "+t,i="opacity"+a+",visibility"+a;return e||(a=" "+r+"s "+t,i+=H.transformSupported?","+te+a:",left"+a+",top"+a),tn+":"+i}function Ie(r,e,t){var a=r.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!H.transformSupported)return t?"top:"+i+";left:"+a+";":[["top",i],["left",a]];var n=H.transform3dSupported,o="translate"+(n?"3d":"")+"("+a+","+i+(n?",0":"")+")";return t?"top:0;left:0;"+te+":"+o+";":[["top",0],["left",0],[Aa,o]]}function on(r){var e=[],t=r.get("fontSize"),a=r.getTextColor();a&&e.push("color:"+a),e.push("font:"+r.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var i=r.get("textShadowColor"),n=r.get("textShadowBlur")||0,o=r.get("textShadowOffsetX")||0,s=r.get("textShadowOffsetY")||0;return i&&n&&e.push("text-shadow:"+o+"px "+s+"px "+n+"px "+i),w(["decoration","align"],function(l){var u=r.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function sn(r,e,t){var a=[],i=r.get("transitionDuration"),n=r.get("backgroundColor"),o=r.get("shadowBlur"),s=r.get("shadowColor"),l=r.get("shadowOffsetX"),u=r.get("shadowOffsetY"),h=r.getModel("textStyle"),f=na(r,"html"),v=l+"px "+u+"px "+o+"px "+s;return a.push("box-shadow:"+v),e&&i&&a.push(nn(i,t)),n&&a.push("background-color:"+n),w(["width","color","radius"],function(c){var d="border-"+c,p=ia(d),m=r.get(p);m!=null&&a.push(d+":"+m+(c==="color"?"":"px"))}),a.push(on(h)),f!=null&&a.push("padding:"+aa(f).join("px ")+"px"),a.join(";")+";"}function De(r,e,t,a,i){var n=e&&e.painter;if(t){var o=n&&n.getViewportRoot();o&&ur(r,o,t,a,i)}else{r[0]=a,r[1]=i;var s=n&&n.getViewportRootOffset();s&&(r[0]+=s.offsetLeft,r[1]+=s.offsetTop)}r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var ln=function(){function r(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,H.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var i=this._zr=e.getZr(),n=t.appendTo,o=n&&(R(n)?document.querySelector(n):se(n)?n:tt(n)&&n(e.getDom()));De(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(a),this._api=e,this._container=o;var s=this;a.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},a.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,h=i.painter.getViewportRoot();lr(h,l,!0),u.dispatch("mousemove",l)}},a.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return r.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),a=Ji(t,"position"),i=t.style;i.position!=="absolute"&&a!=="absolute"&&(i.position="relative")}var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n,this.el.className=e.get("className")||""},r.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,i=a.style,n=this._styleCoord;a.innerHTML?i.cssText=en+sn(e,!this._firstShow,this._longHide)+Ie(n[0],n[1],!0)+("border-color:"+Tt(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(e,t,a,i,n){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(R(n)&&a.get("trigger")==="item"&&!Ta(a)&&(s=rn(a,i,n)),R(e))o.innerHTML=e+s;else if(e){o.innerHTML="",W(e)||(e=[e]);for(var l=0;l<e.length;l++)se(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},r.prototype.moveTo=function(e,t){var a=this._styleCoord;if(De(a,this._zr,this._container,e,t),a[0]!=null&&a[1]!=null){var i=this.el.style,n=Ie(a[0],a[1]);w(n,function(o){i[o[0]]=o[1]})}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",H.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(J(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},r}();const un=ln;var hn=function(){function r(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Be(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return r.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(e,t,a,i,n){var o=this;nt(e)&&hr(""),this.el&&this._zr.remove(this.el);var s=a.getModel("textStyle");this.el=new Ct({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:na(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),w(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=a.get(u)}),w(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),a=Oe(e.style);return[t.width+a.left+a.right,t.height+a.top+a.bottom]},r.prototype.moveTo=function(e,t){var a=this.el;if(a){var i=this._styleCoord;Be(i,this._zr,e,t),e=i[0],t=i[1];var n=a.style,o=K(n.borderWidth||0),s=Oe(n);a.x=e+o+s.left,a.y=t+o+s.top,a.markRedraw()}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(J(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function K(r){return Math.max(0,r)}function Oe(r){var e=K(r.shadowBlur||0),t=K(r.shadowOffsetX||0),a=K(r.shadowOffsetY||0);return{left:K(e-t),right:K(e+t),top:K(e-a),bottom:K(e+a)}}function Be(r,e,t,a){r[0]=t,r[1]=a,r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}const fn=hn;var vn=new fr({shape:{x:-1,y:-1,width:2,height:2}}),cn=function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,a){if(!(H.node||!a.getDom())){var i=t.getComponent("tooltip"),n=this._renderMode=vr(i.get("renderMode"));this._tooltipContent=n==="richText"?new fn(a):new un(a,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,a,i){if(!(H.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=a,this._api=i;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?ea(this,"_updatePosition",50,"fixRate"):Ft(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,a=t.get("triggerOn");Sa("itemTooltip",this._api,J(function(i,n,o){a!=="none"&&(a.indexOf(i)>=0?this._tryShow(n,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,a=this._ecModel,i=this._api,n=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&n!=="none"&&n!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,a,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,a,i,n){if(!(n.from===this.uid||H.node||!i.getDom())){var o=Ne(n,i);this._ticket="";var s=n.dataByCoordSys,l=mn(n,a,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:n.position,positionDefault:"bottom"},o)}else if(n.tooltip&&n.x!=null&&n.y!=null){var h=vn;h.x=n.x,h.y=n.y,h.update(),$(h).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:h},o)}else if(s)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:s,tooltipOption:n.tooltipOption},o);else if(n.seriesIndex!=null){if(this._manuallyAxisShowTip(t,a,i,n))return;var f=Ma(n,a),v=f.point[0],c=f.point[1];v!=null&&c!=null&&this._tryShow({offsetX:v,offsetY:c,target:f.el,position:n.position,positionDefault:"bottom"},o)}else n.x!=null&&n.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},o))}},e.prototype.manuallyHideTip=function(t,a,i,n){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(Ne(n,i))},e.prototype._manuallyAxisShowTip=function(t,a,i,n){var o=n.seriesIndex,s=n.dataIndex,l=a.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=a.getSeriesByIndex(o);if(u){var h=u.getData(),f=ut([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:n.position}),!0}}},e.prototype._tryShow=function(t,a){var i=t.target,n=this._tooltipModel;if(n){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=$(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;cr(i,function(h){if($(h).dataIndex!=null)return l=h,!0;if($(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(t,l,a):u?this._showComponentItemTooltip(t,u,a):this._hide(a)}else this._lastDataByCoordSys=null,this._hide(a)}},e.prototype._showOrMove=function(t,a){var i=t.get("showDelay");a=J(a,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(a,i):a()},e.prototype._showAxisTooltip=function(t,a){var i=this._ecModel,n=this._tooltipModel,o=[a.offsetX,a.offsetY],s=ut([a.tooltipOption],n),l=this._renderMode,u=[],h=le("section",{blocks:[],noHeader:!0}),f=[],v=new Dt;w(t,function(y){w(y.dataByAxis,function(x){var _=i.getComponent(x.axisDim+"Axis",x.axisIndex),T=x.value;if(!(!_||T==null)){var k=ba(T,_.axis,i,x.seriesDataIndices,x.valueLabelOpt),A=le("section",{header:k,noHeader:!dr(k),sortBlocks:!0,blocks:[]});h.blocks.push(A),w(x.seriesDataIndices,function(S){var P=i.getSeriesByIndex(S.seriesIndex),M=S.dataIndexInside,b=P.getDataParams(M);if(!(b.dataIndex<0)){b.axisDim=x.axisDim,b.axisIndex=x.axisIndex,b.axisType=x.axisType,b.axisId=x.axisId,b.axisValue=jt(_.axis,{value:T}),b.axisValueLabel=k,b.marker=v.makeTooltipMarker("item",Tt(b.color),l);var C=ue(P.formatTooltip(M,!0,null)),L=C.frag;if(L){var D=ut([P],n).get("valueFormatter");A.blocks.push(D?St({valueFormatter:D},L):L)}C.text&&f.push(C.text),u.push(b)}})}})}),h.blocks.reverse(),f.reverse();var c=a.position,d=s.get("order"),p=he(h,v,l,d,i.get("useUTC"),s.get("textStyle"));p&&f.unshift(p);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,c,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",o[0],o[1],c,null,v)})},e.prototype._showSeriesItemTooltip=function(t,a,i){var n=this._ecModel,o=$(a),s=o.seriesIndex,l=n.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,f=o.dataType,v=u.getData(f),c=this._renderMode,d=t.positionDefault,p=ut([v.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),m=p.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(h,f),y=new Dt;g.marker=y.makeTooltipMarker("item",Tt(g.color),c);var x=ue(u.formatTooltip(h,!1,f)),_=p.get("order"),T=p.get("valueFormatter"),k=x.frag,A=k?he(T?St({valueFormatter:T},k):k,y,c,_,n.get("useUTC"),p.get("textStyle")):x.text,S="item_"+u.name+"_"+h;this._showOrMove(p,function(){this._showTooltipContent(p,A,g,S,t.offsetX,t.offsetY,t.position,t.target,y)}),i({type:"showTip",dataIndexInside:h,dataIndex:v.getRawIndex(h),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,a,i){var n=$(a),o=n.tooltipConfig,s=o.option||{};if(R(s)){var l=s;s={content:l,formatter:l}}var u=[s],h=this._ecModel.getComponent(n.componentMainType,n.componentIndex);h&&u.push(h),u.push({formatter:s.content});var f=t.positionDefault,v=ut(u,this._tooltipModel,f?{position:f}:null),c=v.get("content"),d=Math.random()+"",p=new Dt;this._showOrMove(v,function(){var m=$t(v.get("formatterParams")||{});this._showTooltipContent(v,c,m,d,t.offsetX,t.offsetY,t.position,a,p)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,a,i,n,o,s,l,u,h){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var f=this._tooltipContent;f.setEnterable(t.get("enterable"));var v=t.get("formatter");l=l||t.get("position");var c=a,d=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),p=d.color;if(v)if(R(v)){var m=t.ecModel.get("useUTC"),g=W(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;c=v,y&&(c=ze(g.axisValue,c,m)),c=gr(c,i,!0)}else if(tt(v)){var x=J(function(_,T){_===this._ticket&&(f.setContent(T,h,t,p,l),this._updatePosition(t,l,o,s,f,i,u))},this);this._ticket=n,c=v(i,n,x)}else c=v;f.setContent(c,h,t,p,l),f.show(t,p),this._updatePosition(t,l,o,s,f,i,u)}},e.prototype._getNearestPoint=function(t,a,i,n){if(i==="axis"||W(a))return{color:n||(this._renderMode==="html"?"#fff":"none")};if(!W(a))return{color:n||a.color||a.borderColor}},e.prototype._updatePosition=function(t,a,i,n,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();a=a||t.get("position");var f=o.getSize(),v=t.get("align"),c=t.get("verticalAlign"),d=l&&l.getBoundingRect().clone();if(l&&d.applyTransform(l.transform),tt(a)&&(a=a([i,n],s,o.el,d,{viewSize:[u,h],contentSize:f.slice()})),W(a))i=rt(a[0],u),n=rt(a[1],h);else if(nt(a)){var p=a;p.width=f[0],p.height=f[1];var m=pr(p,{width:u,height:h});i=m.x,n=m.y,v=null,c=null}else if(R(a)&&l){var g=pn(a,d,f,t.get("borderWidth"));i=g[0],n=g[1]}else{var g=dn(i,n,o,u,h,v?null:20,c?null:20);i=g[0],n=g[1]}if(v&&(i-=Ee(v)?f[0]/2:v==="right"?f[0]:0),c&&(n-=Ee(c)?f[1]/2:c==="bottom"?f[1]:0),Ta(t)){var g=gn(i,n,o,u,h);i=g[0],n=g[1]}o.moveTo(i,n)},e.prototype._updateContentNotChangedOnAxis=function(t,a){var i=this._lastDataByCoordSys,n=this._cbParamsList,o=!!i&&i.length===t.length;return o&&w(i,function(s,l){var u=s.dataByAxis||[],h=t[l]||{},f=h.dataByAxis||[];o=o&&u.length===f.length,o&&w(u,function(v,c){var d=f[c]||{},p=v.seriesDataIndices||[],m=d.seriesDataIndices||[];o=o&&v.value===d.value&&v.axisType===d.axisType&&v.axisId===d.axisId&&p.length===m.length,o&&w(p,function(g,y){var x=m[y];o=o&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),n&&w(v.seriesDataIndices,function(g){var y=g.seriesIndex,x=a[y],_=n[y];x&&_&&_.data!==x.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=a,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,a){H.node||!a.getDom()||(Ft(this,"_updatePosition"),this._tooltipContent.dispose(),Vt("itemTooltip",a))},e.type="tooltip",e}(Zt);function ut(r,e,t){var a=e.ecModel,i;t?(i=new ot(t,a,a),i=new ot(e.option,i,a)):i=e;for(var n=r.length-1;n>=0;n--){var o=r[n];o&&(o instanceof ot&&(o=o.get("tooltip",!0)),R(o)&&(o={formatter:o}),o&&(i=new ot(o,i,a)))}return i}function Ne(r,e){return r.dispatchAction||J(e.dispatchAction,e)}function dn(r,e,t,a,i,n,o){var s=t.getSize(),l=s[0],u=s[1];return n!=null&&(r+l+n+2>a?r-=l+n:r+=n),o!=null&&(e+u+o>i?e-=u+o:e+=o),[r,e]}function gn(r,e,t,a,i){var n=t.getSize(),o=n[0],s=n[1];return r=Math.min(r+o,a)-o,e=Math.min(e+s,i)-s,r=Math.max(r,0),e=Math.max(e,0),[r,e]}function pn(r,e,t,a){var i=t[0],n=t[1],o=Math.ceil(Math.SQRT2*a)+8,s=0,l=0,u=e.width,h=e.height;switch(r){case"inside":s=e.x+u/2-i/2,l=e.y+h/2-n/2;break;case"top":s=e.x+u/2-i/2,l=e.y-n-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+h+o;break;case"left":s=e.x-i-o,l=e.y+h/2-n/2;break;case"right":s=e.x+u+o,l=e.y+h/2-n/2}return[s,l]}function Ee(r){return r==="center"||r==="middle"}function mn(r,e,t){var a=mr(r).queryOptionMap,i=a.keys()[0];if(!(!i||i==="series")){var n=yr(e,i,a.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=n.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=$(u).tooltipConfig;if(h&&h.name===r.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}const yn=cn;function On(r){xr(Ki),r.registerComponentModel(Qi),r.registerComponentView(yn),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},fe),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},fe)}export{fi as A,Lt as I,ve as O,Ur as a,kn as b,Cn as c,In as d,_n as e,Dn as f,ti as g,ai as h,wn as i,An as j,bn as k,pe as l,jr as m,Tn as n,_i as o,Ki as p,Kr as q,Mn as r,ei as s,Sn as t,Pn as u,Ln as v,On as w};
