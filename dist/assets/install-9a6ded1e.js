import{c7 as le,_ as E,e as d,K as M,c8 as at,c9 as te,J as ke,L as U,ca as Ue,cb as Ye,j as Y,I as it,cc as z,aD as k,cd as ot,ce as Je,cf as st,ai as W,a0 as Ne,a4 as R,a3 as re,cg as J,ch as lt,bt as ut,aa as ct,ci as ft,aJ as ze,v as Xe,bm as pt,cj as gt,bn as ht,ck as vt,w as yt,cl as dt,cm as mt,cn as _t,co as St,c as S,ba as wt,u as Tt,B as bt,S as Gt,a7 as j,cp as Ft,bs as Rt,R as At,b5 as Mt,cq as Pt,ah as ue,i as Ct,A as Lt,bY as Dt,aA as It,ay as Et,cr as ce,cs as je,bU as Vt,as as xt,an as Ot,aW as kt,aU as ne,aq as Ut,aY as Yt,ct as Jt,k as Nt,cu as zt,bp as Xt,ac as jt}from"./installCanvasRenderer-17cffbb3.js";var Zt=1e-8;function fe(i,t){return Math.abs(i-t)<Zt}function pe(i,t,e){var r=0,n=i[0];if(!n)return!1;for(var a=1;a<i.length;a++){var o=i[a];r+=le(n[0],n[1],o[0],o[1],t,e),n=o}var s=i[0];return(!fe(n[0],s[0])||!fe(n[1],s[1]))&&(r+=le(n[0],n[1],s[0],s[1],t,e)),r!==0}var Ht=[];function B(i,t){for(var e=0;e<i.length;e++)U(i[e],i[e],t)}function ge(i,t,e,r){for(var n=0;n<i.length;n++){var a=i[n];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Ue(t,t,a),Ye(e,e,a))}}function Wt(i){for(var t=0,e=0,r=0,n=i.length,a=i[n-1][0],o=i[n-1][1],s=0;s<n;s++){var l=i[s][0],u=i[s][1],c=a*u-l*o;t+=c,e+=(a+l)*c,r+=(o+u)*c,a=l,o=u}return t?[e/t/3,r/t/3,t]:[i[0][0]||0,i[0][1]||0]}var Ze=function(){function i(t){this.name=t}return i.prototype.setCenter=function(t){this._center=t},i.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},i}(),he=function(){function i(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return i}(),ve=function(){function i(t){this.type="linestring",this.points=t}return i}(),He=function(i){E(t,i);function t(e,r,n){var a=i.call(this,e)||this;return a.type="geoJSON",a.geometries=r,a._center=n&&[n[0],n[1]],a}return t.prototype.calcCenter=function(){for(var e=this.geometries,r,n=0,a=0;a<e.length;a++){var o=e[a],s=o.exterior,l=s&&s.length;l>n&&(r=o,n=l)}if(r)return Wt(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var r=this._rect;if(r&&!e)return r;var n=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return d(o,function(s){s.type==="polygon"?ge(s.exterior,n,a,e):d(s.points,function(l){ge(l,n,a,e)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])||(n[0]=n[1]=a[0]=a[1]=0),r=new M(n[0],n[1],a[0]-n[0],a[1]-n[1]),e||(this._rect=r),r},t.prototype.contain=function(e){var r=this.getBoundingRect(),n=this.geometries;if(!r.contain(e[0],e[1]))return!1;e:for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(pe(l,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(pe(u[c],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,r,n,a){var o=this.getBoundingRect(),s=o.width/o.height;n?a||(a=n/s):n=s*a;for(var l=new M(e,r,n,a),u=o.calculateTransform(l),c=this.geometries,p=0;p<c.length;p++){var g=c[p];g.type==="polygon"?(B(g.exterior,u),d(g.interiors,function(f){B(f,u)})):d(g.points,function(f){B(f,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(Ze),$t=function(i){E(t,i);function t(e,r){var n=i.call(this,e)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,r=e.getBoundingRect(),n=[r.x+r.width/2,r.y+r.height/2],a=at(Ht),o=e;o&&!o.isGeoSVGGraphicRoot;)te(a,o.getLocalTransform(),a),o=o.parent;return ke(a,a),U(n,n,a),n},t}(Ze);function qt(i){if(!i.UTF8Encoding)return i;var t=i,e=t.UTF8Scale;e==null&&(e=1024);var r=t.features;return d(r,function(n){var a=n.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=We(s,o,e);break;case"Polygon":K(s,o,e);break;case"MultiLineString":K(s,o,e);break;case"MultiPolygon":d(s,function(l,u){return K(l,o[u],e)})}}),t.UTF8Encoding=!1,t}function K(i,t,e){for(var r=0;r<i.length;r++)i[r]=We(i[r],t[r],e)}function We(i,t,e){for(var r=[],n=t[0],a=t[1],o=0;o<i.length;o+=2){var s=i.charCodeAt(o)-64,l=i.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=n,l+=a,n=s,a=l,r.push([s/e,l/e])}return r}function Bt(i,t){return i=qt(i),Y(it(i.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var r=e.properties,n=e.geometry,a=[];switch(n.type){case"Polygon":var o=n.coordinates;a.push(new he(o[0],o.slice(1)));break;case"MultiPolygon":d(n.coordinates,function(l){l[0]&&a.push(new he(l[0],l.slice(1)))});break;case"LineString":a.push(new ve([n.coordinates]));break;case"MultiLineString":a.push(new ve(n.coordinates))}var s=new He(r[t||"name"],a,r.cp);return s.properties=r,s})}var ye=U,Kt=function(i){E(t,i);function t(e){var r=i.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new z,r._rawTransformable=new z,r.name=e,r}return t.prototype.setBoundingRect=function(e,r,n,a){return this._rect=new M(e,r,n,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,r,n,a){this._transformTo(e,r,n,a),this._viewRect=new M(e,r,n,a)},t.prototype._transformTo=function(e,r,n,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new M(e,r,n,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e,r){e&&(this._center=[k(e[0],r.getWidth()),k(e[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var r=this.zoomLimit;r&&(r.max!=null&&(e=Math.min(r.max,e)),r.min!=null&&(e=Math.max(r.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),r=e.x+e.width/2,n=e.y+e.height/2;return[r,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,n=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=U([],a,e),n=U([],n,e),r.originX=a[0],r.originY=a[1],r.x=n[0]-a[0],r.y=n[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,r=this._rawTransformable;r.parent=e,e.updateTransform(),r.updateTransform(),ot(this.transform||(this.transform=[]),r.transform||Je()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],ke(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,r=this._roamTransformable,n=new z;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,r,n){var a=r?this._rawTransform:this.transform;return n=n||[],a?ye(n,e,a):st(n,e)},t.prototype.pointToData=function(e){var r=this.invTransform;return r?ye([],e,r):[e[0],e[1]]},t.prototype.convertToPixel=function(e,r,n){var a=de(r);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var a=de(r);return a===this?a.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(z);function de(i){var t=i.seriesModel;return t?t.coordinateSystem:null}const $e=Kt;function qe(i){if(W(i)){var t=new DOMParser;i=t.parseFromString(i,"text/xml")}var e=i;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var Q,Z={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},me=Ne(Z),H={"alignment-baseline":"textBaseline","stop-color":"stopColor"},_e=Ne(H),Qt=function(){function i(){this._defs={},this._root=null}return i.prototype.parse=function(t,e){e=e||{};var r=qe(t);this._defsUsePending=[];var n=new R;this._root=n;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||e.width),l=parseFloat(r.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),w(r,n,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,n,a,null,!1,!1),u=u.nextSibling;rr(this._defs,this._defsUsePending),this._defsUsePending=[];var c,p;if(o){var g=$(o);g.length>=4&&(c={x:parseFloat(g[0]||0),y:parseFloat(g[1]||0),width:parseFloat(g[2]),height:parseFloat(g[3])})}if(c&&s!=null&&l!=null&&(p=Ke(c,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var f=n;n=new R,n.add(f),f.scaleX=f.scaleY=p.scale,f.x=p.x,f.y=p.y}return!e.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new re({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:c,viewBoxTransform:p,named:a}},i.prototype._parseNode=function(t,e,r,n,a,o){var s=t.nodeName.toLowerCase(),l,u=n;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=e;else{if(!a){var c=Q[s];if(c&&J(Q,s)){l=c.call(this,t,e);var p=t.getAttribute("name");if(p){var g={name:p,namedFrom:null,svgNodeTagLower:s,el:l};r.push(g),s==="g"&&(u=g)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});e.add(l)}}var f=Se[s];if(f&&J(Se,s)){var h=f.call(this,t),y=t.getAttribute("id");y&&(this._defs[y]=h)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,r,u,a,o):v.nodeType===3&&o&&this._parseText(v,l),v=v.nextSibling},i.prototype._parseText=function(t,e){var r=new lt({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});T(e,r),w(t,r,this._defsUsePending,!1,!1),er(r,e);var n=r.style,a=n.fontSize;a&&a<9&&(n.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var s=r.getBoundingRect();return this._textX+=s.width,e.add(r),r},i.internalField=function(){Q={g:function(t,e){var r=new R;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r},rect:function(t,e){var r=new re;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,e){var r=new ut;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,e){var r=new ct;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,e){var r=new ft;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,e){var r=t.getAttribute("points"),n;r&&(n=be(r));var a=new ze({shape:{points:n||[]},silent:!0});return T(e,a),w(t,a,this._defsUsePending,!1,!1),a},polyline:function(t,e){var r=t.getAttribute("points"),n;r&&(n=be(r));var a=new Xe({shape:{points:n||[]},silent:!0});return T(e,a),w(t,a,this._defsUsePending,!1,!1),a},image:function(t,e){var r=new pt;return T(e,r),w(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,e){var r=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(n)+parseFloat(o);var s=new R;return T(e,s),w(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var r=t.getAttribute("x"),n=t.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new R;return T(e,s),w(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(t,e){var r=t.getAttribute("d")||"",n=gt(r);return T(e,n),w(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),i}(),Se={lineargradient:function(i){var t=parseInt(i.getAttribute("x1")||"0",10),e=parseInt(i.getAttribute("y1")||"0",10),r=parseInt(i.getAttribute("x2")||"10",10),n=parseInt(i.getAttribute("y2")||"0",10),a=new ht(t,e,r,n);return we(i,a),Te(i,a),a},radialgradient:function(i){var t=parseInt(i.getAttribute("cx")||"0",10),e=parseInt(i.getAttribute("cy")||"0",10),r=parseInt(i.getAttribute("r")||"0",10),n=new vt(t,e,r);return we(i,n),Te(i,n),n}};function we(i,t){var e=i.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function Te(i,t){for(var e=i.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var r=e.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var a={};Be(e,a,a);var o=a.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:o})}e=e.nextSibling}}function T(i,t){i&&i.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),yt(t.__inheritedStyle,i.__inheritedStyle))}function be(i){for(var t=$(i),e=[],r=0;r<t.length;r+=2){var n=parseFloat(t[r]),a=parseFloat(t[r+1]);e.push([n,a])}return e}function w(i,t,e,r,n){var a=t,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};i.nodeType===1&&(ir(i,t),Be(i,o,s),r||or(i,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=Ge(a,"fill",o.fill,e)),o.stroke!=null&&(a.style.stroke=Ge(a,"stroke",o.stroke,e)),d(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),d(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),n&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=Y($(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function er(i,t){var e=t.__selfStyle;if(e){var r=e.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),i.style.textBaseline=n}var a=t.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),i.style.textAlign=s)}}var tr=/^url\(\s*#(.*?)\)/;function Ge(i,t,e,r){var n=e&&e.match(tr);if(n){var a=dt(n[1]);r.push([i,t,a]);return}return e==="none"&&(e=null),e}function rr(i,t){for(var e=0;e<t.length;e++){var r=t[e];r[0].style[r[1]]=i[r[2]]}}var nr=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $(i){return i.match(nr)||[]}var ar=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,ee=Math.PI/180;function ir(i,t){var e=i.getAttribute("transform");if(e){e=e.replace(/,/g," ");var r=[],n=null;e.replace(ar,function(p,g,f){return r.push(g,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=$(o);switch(n=n||Je(),s){case"translate":St(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":_t(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":mt(n,n,-parseFloat(l[0])*ee);break;case"skewX":var u=Math.tan(parseFloat(l[0])*ee);te(n,[1,0,u,1,0,0],n);break;case"skewY":var c=Math.tan(parseFloat(l[0])*ee);te(n,[1,c,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var Fe=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Be(i,t,e){var r=i.getAttribute("style");if(r){Fe.lastIndex=0;for(var n;(n=Fe.exec(r))!=null;){var a=n[1],o=J(Z,a)?Z[a]:null;o&&(t[o]=n[2]);var s=J(H,a)?H[a]:null;s&&(e[s]=n[2])}}}function or(i,t,e){for(var r=0;r<me.length;r++){var n=me[r],a=i.getAttribute(n);a!=null&&(t[Z[n]]=a)}for(var r=0;r<_e.length;r++){var n=_e[r],a=i.getAttribute(n);a!=null&&(e[H[n]]=a)}}function Ke(i,t){var e=t.width/i.width,r=t.height/i.height,n=Math.min(e,r);return{scale:n,x:-(i.x+i.width/2)*n+(t.x+t.width/2),y:-(i.y+i.height/2)*n+(t.y+t.height/2)}}function sr(i,t){var e=new Qt;return e.parse(i,t)}var lr=S(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),ur=function(){function i(t,e){this.type="geoSVG",this._usedGraphicMap=S(),this._freedGraphics=[],this._mapName=t,this._parsedXML=qe(e)}return i.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=fr(t.named),r=e.regions,n=e.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},i.prototype._buildGraphic=function(t){var e,r;try{e=t&&sr(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=e.root,wt(r!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var n=new R;n.add(r),n.isGeoSVGGraphicRoot=!0;var a=e.width,o=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,p=void 0,g=void 0;if(a!=null?(u=0,p=a):s&&(u=s.x,p=s.width),o!=null?(c=0,g=o):s&&(c=s.y,g=s.height),u==null||c==null){var f=r.getBoundingRect();u==null&&(u=f.x,p=f.width),c==null&&(c=f.y,g=f.height)}l=this._boundingRect=new M(u,c,p,g)}if(s){var h=Ke(s,l);r.scaleX=r.scaleY=h.scale,r.x=h.x,r.y=h.y}n.setClipPath(new re({shape:l.plain()}));var y=[];return d(e.named,function(v){lr.get(v.svgNodeTagLower)!=null&&(y.push(v),cr(v.el))}),{root:n,boundingRect:l,named:y}},i.prototype.useGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,r),r)},i.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);r&&(e.removeKey(t),this._freedGraphics.push(r))},i}();function cr(i){i.silent=!1,i.isGroup&&i.traverse(function(t){t.silent=!1})}function fr(i){var t=[],e=S();return d(i,function(r){if(r.namedFrom==null){var n=new $t(r.name,r.el);t.push(n),e.set(r.name,n)}}),{regions:t,regionsMap:e}}var ae=[126,25],Re="南海诸岛",D=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var L=0;L<D.length;L++)for(var I=0;I<D[L].length;I++)D[L][I][0]/=10.5,D[L][I][1]/=-10.5/.75,D[L][I][0]+=ae[0],D[L][I][1]+=ae[1];function pr(i,t){if(i==="china"){for(var e=0;e<t.length;e++)if(t[e].name===Re)return;t.push(new He(Re,Y(D,function(r){return{type:"polygon",exterior:r}}),ae))}}var gr={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function hr(i,t){if(i==="china"){var e=gr[t.name];if(e){var r=t.getCenter();r[0]+=e[0]/10.5,r[1]+=-e[1]/(10.5/.75),t.setCenter(r)}}}var vr=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function yr(i,t){i==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:vr[0]})}var dr="name",mr=function(){function i(t,e,r){this.type="geoJSON",this._parsedMap=S(),this._mapName=t,this._specialAreas=r,this._geoJSON=Sr(e)}return i.prototype.load=function(t,e){e=e||dr;var r=this._parsedMap.get(e);if(!r){var n=this._parseToRegions(e);r=this._parsedMap.set(e,{regions:n,boundingRect:_r(n)})}var a=S(),o=[];return d(r.regions,function(s){var l=s.name;t&&J(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new M(0,0,0,0),regionsMap:a}},i.prototype._parseToRegions=function(t){var e=this._mapName,r=this._geoJSON,n;try{n=r?Bt(r,t):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return pr(e,n),d(n,function(a){var o=a.name;hr(e,a),yr(e,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),n},i.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},i}();function _r(i){for(var t,e=0;e<i.length;e++){var r=i[e].getBoundingRect();t=t||r.clone(),t.union(r)}return t}function Sr(i){return W(i)?typeof JSON<"u"&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}var O=S();const P={registerMap:function(i,t,e){if(t.svg){var r=new ur(i,t.svg);O.set(i,r)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?e=t.specialAreas:n=t;var r=new mr(i,n,e);O.set(i,r)}},getGeoResource:function(i){return O.get(i)},getMapForUser:function(i){var t=O.get(i);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(i,t,e){var r=O.get(i);if(r)return r.load(t,e)}};var wr={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Qe=["lng","lat"],et=function(i){E(t,i);function t(e,r,n){var a=i.call(this,e)||this;a.dimensions=Qe,a.type="geo",a._nameCoordMap=S(),a.map=r;var o=n.projection,s=P.load(r,n.nameMap,n.nameProperty),l=P.getGeoResource(r);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=wr[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var p;if(o)for(var g=0;g<u.length;g++){var f=u[g].getBoundingRect(o);p=p||f.clone(),p.union(f)}else p=s.boundingRect;return a.setBoundingRect(p.x,p.y,p.width,p.height),a.aspectScale=o?1:Tt(n.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return t.prototype._transformTo=function(e,r,n,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new M(e,r,n,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var r=this.regions,n=0;n<r.length;n++){var a=r[n];if(a.type==="geoJSON"&&a.contain(e))return r[n]}},t.prototype.addGeoCoord=function(e,r){this._nameCoordMap.set(e,r)},t.prototype.getGeoCoord=function(e){var r=this._regionsMap.get(e);return this._nameCoordMap.get(e)||r&&r.getCenter()},t.prototype.dataToPoint=function(e,r,n){if(W(e)&&(e=this.getGeoCoord(e)),e){var a=this.projection;return a&&(e=a.project(e)),e&&this.projectedToPoint(e,r,n)}},t.prototype.pointToData=function(e){var r=this.projection;return r&&(e=r.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return i.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,r,n){return i.prototype.dataToPoint.call(this,e,r,n)},t.prototype.convertToPixel=function(e,r,n){var a=Ae(r);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var a=Ae(r);return a===this?a.pointToData(n):null},t}($e);bt(et,$e);function Ae(i){var t=i.geoModel,e=i.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Gt).models[0]||{}).coordinateSystem:null}const Me=et;function Pe(i,t){var e=i.get("boundingCoords");if(e!=null){var r=e[0],n=e[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=n[0],u=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var c=function(V,F,C,b){for(var x=C-V,nt=b-F,q=0;q<=100;q++){var oe=q/100,se=a.project([V+x*oe,F+nt*oe]);Ue(r,r,se),Ye(n,n,se)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var p=this.getBoundingRect(),g=i.get("layoutCenter"),f=i.get("layoutSize"),h=t.getWidth(),y=t.getHeight(),v=p.width/p.height*this.aspectScale,m=!1,G,A;g&&f&&(G=[k(g[0],h),k(g[1],y)],A=k(f,Math.min(h,y)),!isNaN(G[0])&&!isNaN(G[1])&&!isNaN(A)&&(m=!0));var _;if(m)_={},v>1?(_.width=A,_.height=A/v):(_.height=A,_.width=A*v),_.y=G[1]-_.height/2,_.x=G[0]-_.width/2;else{var N=i.getBoxLayoutParams();N.aspect=v,_=At(N,{width:h,height:y})}this.setViewRect(_.x,_.y,_.width,_.height),this.setCenter(i.get("center"),t),this.setZoom(i.get("zoom"))}function Tr(i,t){d(t.get("geoCoord"),function(e,r){i.addGeoCoord(r,e)})}var br=function(){function i(){this.dimensions=Qe}return i.prototype.create=function(t,e){var r=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new Me(l+s,l,j({nameMap:o.get("nameMap")},n(o)));u.zoomLimit=o.get("scaleLimit"),r.push(u),o.coordinateSystem=u,u.model=o,u.resize=Pe,u.resize(o,e)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),d(a,function(o,s){var l=Y(o,function(c){return c.get("nameMap")}),u=new Me(s,s,j({nameMap:Ft(l)},n(o[0])));u.zoomLimit=Rt.apply(null,Y(o,function(c){return c.get("scaleLimit")})),r.push(u),u.resize=Pe,u.resize(o[0],e),d(o,function(c){c.coordinateSystem=u,Tr(u,c)})}),r},i.prototype.getFilledRegions=function(t,e,r,n){for(var a=(t||[]).slice(),o=S(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=P.load(e,r,n);return d(l.regions,function(u){var c=u.name;!o.get(c)&&a.push({name:c})}),a},i}(),Gr=new br;const tt=Gr;var Fr=function(i){E(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,r,n){var a=P.getGeoResource(e.map);if(a&&a.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,n),Mt(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,r=this.option;r.regions=tt.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=Pt(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new ue(o,e,e.ecModel)),o.selected&&(n[s]=!0)),a},S()),r.selectedMap||(r.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new ue(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,r){var n=this.getRegionModel(e),a=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:e};if(Ct(a))return o.status=r,a(o);if(W(a))return a.replace("{a}",e??"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[e]=!0}},t.prototype.unSelect=function(e){var r=this.option.selectedMap;r&&(r[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var r=this.option.selectedMap;return!!(r&&r[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Lt);const Rr=Fr;function Ce(i,t){return i.pointToProjected?i.pointToProjected(t):i.pointToData(t)}function Ar(i,t,e,r){var n=i.getZoom(),a=i.getCenter(),o=t.zoom,s=i.projectedToPoint?i.projectedToPoint(a):i.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,i.setCenter(Ce(i,s),r)),o!=null){if(e){var l=e.min||0,u=e.max||1/0;o=Math.max(Math.min(n*o,u),l)/n}i.scaleX*=o,i.scaleY*=o;var c=(t.originX-i.x)*(o-1),p=(t.originY-i.y)*(o-1);i.x-=c,i.y-=p,i.updateTransform(),i.setCenter(Ce(i,s),r),i.setZoom(o*n)}return{center:i.getCenter(),zoom:i.getZoom()}}function Mr(i,t,e){var r=i.target;r.x+=t,r.y+=e,r.dirty()}function Pr(i,t,e,r){var n=i.target,a=i.zoomLimit,o=i.zoom=i.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/i.zoom;i.zoom=o,n.x-=(e-n.x)*(u-1),n.y-=(r-n.y)*(u-1),n.scaleX*=u,n.scaleY*=u,n.dirty()}var ie=["rect","circle","line","ellipse","polygon","polyline","path"],Cr=S(ie),Lr=S(ie.concat(["g"])),Dr=S(ie.concat(["g"])),rt=Nt();function X(i){var t=i.getItemStyle(),e=i.get("areaColor");return e!=null&&(t.fill=e),t}function Le(i){var t=i.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Ir=function(){function i(t){var e=new R;this.uid=Dt("ec_map_draw"),this._controller=new It(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new R),e.add(this._svgGroup=new R)}return i.prototype.draw=function(t,e,r,n,a){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,u=this._regionsGroup,c=this.group,p=l.getTransformInfo(),g=p.raw,f=p.roam,h=!u.childAt(0)||a;h?(c.x=f.x,c.y=f.y,c.scaleX=f.scaleX,c.scaleY=f.scaleY,c.dirty()):Et(c,f,t);var y=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:r,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:y,isGeo:o,transformInfoRaw:g};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,e,r),this._updateMapSelectHandler(t,u,r,n)},i.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=S(),r=S(),n=this._regionsGroup,a=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function c(f,h){return h&&(f=h(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function p(f){for(var h=[],y=!u&&l&&l.project,v=0;v<f.length;++v){var m=c(f[v],y);m&&h.push(m)}return h}function g(f){return{shape:{points:p(f)}}}n.removeAll(),d(t.geo.regions,function(f){var h=f.name,y=e.get(h),v=r.get(h)||{},m=v.dataIdx,G=v.regionModel;y||(y=e.set(h,new R),n.add(y),m=s?s.indexOfName(h):null,G=t.isGeo?o.getRegionModel(h):s?s.getItemModel(m):null,r.set(h,{dataIdx:m,regionModel:G}));var A=[],_=[];d(f.geometries,function(F){if(F.type==="polygon"){var C=[F.exterior].concat(F.interiors||[]);u&&(C=Oe(C,u)),d(C,function(x){A.push(new ze(g(x)))})}else{var b=F.points;u&&(b=Oe(b,u,!0)),d(b,function(x){_.push(new Xe(g(x)))})}});var N=c(f.getCenter(),l&&l.project);function V(F,C){if(F.length){var b=new zt({culling:!0,segmentIgnoreThreshold:1,shape:{paths:F}});y.add(b),De(t,b,m,G),Ie(t,b,h,G,o,m,N),C&&(Le(b),d(b.states,Le))}}V(A),V(_,!0)}),e.each(function(f,h){var y=r.get(h),v=y.dataIdx,m=y.regionModel;Ee(t,f,h,m,o,v),Ve(t,f,h,m,o),xe(t,f,h,m,o)},this)},i.prototype._buildSVG=function(t){var e=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var n=this._svgDispatcherMap=S(),a=!1;d(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,c=o.svgNodeTagLower,p=o.el,g=u?u.indexOfName(s):null,f=l.getRegionModel(s);if(Cr.get(c)!=null&&p instanceof ce&&De(t,p,g,f),p instanceof ce&&(p.culling=!0),p.z2EmphasisLift=0,!o.namedFrom&&(Dr.get(c)!=null&&Ie(t,p,s,f,l,g,null),Ee(t,p,s,f,l,g),Ve(t,p,s,f,l),Lr.get(c)!=null)){var h=xe(t,p,s,f,l);h==="self"&&(a=!0);var y=n.get(s)||n.set(s,[]);y.push(p)}},this),this._enableBlurEntireSVG(a,t)},i.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var r=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){je(a);var o=a.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),a.ensureState("emphasis")}})}},i.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},i.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var r=e.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var a=n.get(t);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},i.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},i.prototype._useSVG=function(t){var e=P.getGeoResource(t);if(e&&e.type==="geoSVG"){var r=e.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},i.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=P.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},i.prototype._updateController=function(t,e,r){var n=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,Mr(o,u.dx,u.dy),r.dispatchAction(j(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,Pr(o,u.scale,u.originX,u.originY),r.dispatchAction(j(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,p){return n.containPoint([c,p])&&!Vt(u,r,t)})},i.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=rt(e).ignore)})},i.prototype._updateMapSelectHandler=function(t,e,r,n){var a=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){a._mouseDownFlag=!0}),e.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},i}();function De(i,t,e,r){var n=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=X(n),u=X(a),c=X(s),p=X(o),g=i.data;if(g){var f=g.getItemVisual(e,"style"),h=g.getItemVisual(e,"decal");i.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),h&&(l.decal=xt(h,i.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=p,je(t)}function Ie(i,t,e,r,n,a,o){var s=i.data,l=i.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var p=l?e:a,g=void 0;(!s||a>=0)&&(g=n);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Ot(t,kt(r),{labelFetcher:g,labelDataIndex:p,defaultText:e},f);var h=t.getTextContent();if(h&&(rt(h).ignore=h.ignore,t.textConfig&&o)){var y=t.getBoundingRect().clone();t.textConfig.layoutRect=y,t.textConfig.position=[(o[0]-y.x)/y.width*100+"%",(o[1]-y.y)/y.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function Ee(i,t,e,r,n,a){i.data?i.data.setItemGraphicEl(a,t):ne(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:e,region:r&&r.option||{}}}function Ve(i,t,e,r,n){i.data||Ut({el:t,componentModel:n,itemName:e,itemTooltipOption:r.get("tooltip")})}function xe(i,t,e,r,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return Yt(t,o,a.get("blurScope"),a.get("disabled")),i.isGeo&&Jt(t,n,e),o}function Oe(i,t,e){var r=[],n;function a(){n=[]}function o(){n.length&&(r.push(n),n=[])}var s=t({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&n.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),d(i,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),r}const Er=Ir;var Vr=function(i){E(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,r){this._api=r},t.prototype.render=function(e,r,n,a){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Er(n));var o=this._mapDraw;o.draw(e,r,n,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,r,n)},t.prototype._handleRegionClick=function(e){var r;Xt(e.target,function(n){return(r=ne(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(e,r,n){var a=this;this._mapDraw.group.traverse(function(o){var s=ne(o).eventData;if(s)return a._model.isSelected(s.name)?n.enterSelect(o):n.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(jt);const xr=Vr;function Or(i,t,e){P.registerMap(i,t,e)}function Ur(i){i.registerCoordinateSystem("geo",tt),i.registerComponentModel(Rr),i.registerComponentView(xr),i.registerImpl("registerMap",Or),i.registerImpl("getMap",function(e){return P.getMapForUser(e)});function t(e,r){r.update="geo:updateSelectStatus",i.registerAction(r,function(n,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:n},function(l){l[e](n.name);var u=l.coordinateSystem;d(u.regions,function(p){o[p.name]=l.isSelected(p.name)||!1});var c=[];d(o,function(p,g){o[g]&&c.push(g)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),i.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,r,n){var a=e.componentType||"series";r.eachComponent({mainType:a,query:e},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=Ar(s,e,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&d(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}export{Er as M,P as g,Ur as i};
