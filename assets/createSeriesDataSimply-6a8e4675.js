import{c as N,e as g,by as Te,j as L,a7 as P,bz as Je,ai as Y,aj as qe,bA as Me,bB as Qe,bC as tn,bD as Jt,bE as en,bF as nn,bG as Dt,g as q,aw as H,a0 as rn,ah as Ie,bH as an,i as G,bI as on,ax as Z,U as Q,b as sn,a as un,bJ as ln,bK as fn,bL as cn,bM as hn,bi as qt,w as tt,bN as pn,bO as vn,bP as dn,_ as R,a4 as Bt,bQ as gn,E as F,bR as mn,bS as yn,v as _n,aJ as xn,d as B,a3 as dt,aG as Dn,aF as Oe,bT as Sn,bU as bn,K as An,V as et,bV as wn,S as gt,A as Nt,ac as zt,q as at,p as Cn,bW as Tn,bX as Mn,aE as In,R as Re,ar as On,bk as Rn,bj as En,bY as Ln,bZ as Qt,b_ as te,av as Pn,am as mt,aq as kn,o as Bn,b$ as Nn,c0 as Vt,c1 as zn,c2 as ee,I as Vn,k as Zn,c3 as Ee,c4 as Fn,c5 as Wn,ad as Gn,u as Un,ap as ne,c6 as re,aU as ie}from"./installCanvasRenderer-17cffbb3.js";function ot(n){return n==null?0:n.length||1}function ae(n){return n}var Hn=function(){function n(t,e,r,i,a,o){this._old=t,this._new=e,this._oldKeyGetter=r||ae,this._newKeyGetter=i||ae,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,r={},i=new Array(t.length),a=new Array(e.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],u=r[s],f=ot(u);if(f>1){var l=u.shift();u.length===1&&(r[s]=u[0]),this._update&&this._update(l,o)}else f===1?(r[s]=null,this._update&&this._update(u,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var t=this._old,e=this._new,r={},i={},a=[],o=[];this._initIndexMap(t,r,a,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var u=a[s],f=r[u],l=i[u],h=ot(f),c=ot(l);if(h>1&&c===1)this._updateManyToOne&&this._updateManyToOne(l,f),i[u]=null;else if(h===1&&c>1)this._updateOneToMany&&this._updateOneToMany(l,f),i[u]=null;else if(h===1&&c===1)this._update&&this._update(l,f),i[u]=null;else if(h>1&&c>1)this._updateManyToMany&&this._updateManyToMany(l,f),i[u]=null;else if(h>1)for(var p=0;p<h;p++)this._remove&&this._remove(f[p]);else this._remove&&this._remove(f)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],a=e[i],o=ot(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);e[i]=null}},n.prototype._initIndexMap=function(t,e,r,i){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(a||(r[o]=s),!!e){var u=e[s],f=ot(u);f===0?(e[s]=o,a&&r.push(s)):f===1?e[s]=[u,o]:u.push(o)}}},n}();const Zt=Hn;var $n=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function Yn(n,t){var e={},r=e.encode={},i=N(),a=[],o=[],s={};g(n.dimensions,function(c){var p=n.getDimensionInfo(c),v=p.coordDim;if(v){var d=p.coordDimIndex;St(r,v)[d]=c,p.isExtraCoord||(i.set(v,1),Xn(p.type)&&(a[0]=c),St(s,v)[d]=n.getDimensionIndex(p.name)),p.defaultTooltip&&o.push(c)}Te.each(function(x,D){var m=St(r,D),_=p.otherDims[D];_!=null&&_!==!1&&(m[_]=p.name)})});var u=[],f={};i.each(function(c,p){var v=r[p];f[p]=v[0],u=u.concat(v)}),e.dataDimsOnCoord=u,e.dataDimIndicesOnCoord=L(u,function(c){return n.getDimensionInfo(c).storeDimIndex}),e.encodeFirstDimNotExtra=f;var l=r.label;l&&l.length&&(a=l.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,e.userOutput=new $n(s,t),e}function St(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function Li(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Xn(n){return!(n==="ordinal"||n==="time")}var Kn=function(){function n(t){this.otherDims={},t!=null&&P(this,t)}return n}();const vt=Kn;var st=Q,W=L,jn=typeof Int32Array>"u"?Array:Int32Array,Jn="e\0\0",oe=-1,qn=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Qn=["_approximateExtent"],se,ht,ut,lt,bt,pt,At,tr=function(){function n(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;Je(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,r=t),r=r||["x","y"];for(var a={},o=[],s={},u=!1,f={},l=0;l<r.length;l++){var h=r[l],c=Y(h)?new vt({name:h}):h instanceof vt?h:new vt(h),p=c.name;c.type=c.type||"float",c.coordDim||(c.coordDim=p,c.coordDimIndex=0);var v=c.otherDims=c.otherDims||{};o.push(p),a[p]=c,f[p]!=null&&(u=!0),c.createInvertedIndices&&(s[p]=[]),v.itemName===0&&(this._nameDimIdx=l),v.itemId===0&&(this._idDimIdx=l),i&&(c.storeDimIndex=l)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(u),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var d=this._dimIdxToName=N();g(o,function(x){d.set(a[x].storeDimIndex,x)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var r=this._dimIdxToName.get(e);if(r!=null)return r;var i=this._schema.getSourceDimension(e);if(i)return i.name},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(qe(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(r){return e.hasOwnProperty(r)?e[r]:void 0}:function(r){return e[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var r=this._dimSummary;if(e==null)return r.encodeFirstDimNotExtra[t];var i=r.encode[t];return i?i[e]:null},n.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,r=e.encode[t];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,r){var i=this,a;if(t instanceof Jt&&(a=t),!a){var o=this.dimensions,s=Me(t)||Qe(t)?new tn(t,o.length):t;a=new Jt;var u=W(o,function(f){return{type:i._dimInfos[f].type,property:f}});a.initData(s,u,r)}this._store=a,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Yn(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var r=this._store.appendValues(t,e.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=i;s<a;s++){var u=s-i;this._nameList[s]=e[u],o&&At(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,r=0;r<e.length;r++){var i=this._dimInfos[e[r]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==en&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,u=s===sn;if(u&&!i.pure)for(var f=[],l=t;l<e;l++){var h=i.getItem(l,f);if(!this.hasItemOption&&nn(h)&&(this.hasItemOption=!0),h){var c=h.name;a[l]==null&&c!=null&&(a[l]=Dt(c,null));var p=h.id;o[l]==null&&p!=null&&(o[l]=Dt(p,null))}}if(this._shouldMakeIdFromName())for(var l=t;l<e;l++)At(this,l);se(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){st(t)?P(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),r=this._nameList[e];return r==null&&this._nameDimIdx!=null&&(r=ut(this,this._nameDimIdx,e)),r==null&&(r=""),r},n.prototype._getCategory=function(t,e){var r=this._store.get(t,e),i=this._store.getOrdinalMeta(t);return i?i.categories[r]:r},n.prototype.getId=function(t){return ht(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var r=this._store,i=this._dimInfos[t];if(i)return r.get(i.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var r=this._store,i=this._dimInfos[t];if(i)return r.getByRawIndex(i.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var r=this,i=this._store;return q(t)?i.getValues(W(t,function(a){return r._getStoreDimIndex(a)}),e):i.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,r=0,i=e.length;r<i;r++)if(isNaN(this._store.get(e[r],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,r=this._store.count();e<r;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var r=t&&this._invertedIndicesMap[t],i=r[e];return i==null||isNaN(i)?oe:i},n.prototype.indicesOfNearest=function(t,e,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,r)},n.prototype.each=function(t,e,r){G(t)&&(r=e,e=t,t=[]);var i=r||this,a=W(lt(t),this._getStoreDimIndex,this);this._store.each(a,i?H(e,i):e)},n.prototype.filterSelf=function(t,e,r){G(t)&&(r=e,e=t,t=[]);var i=r||this,a=W(lt(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?H(e,i):e),this},n.prototype.selectRange=function(t){var e=this,r={},i=rn(t);return g(i,function(a){var o=e._getStoreDimIndex(a);r[o]=t[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(t,e,r){G(t)&&(r=e,e=t,t=[]),r=r||this;var i=[];return this.each(t,function(){i.push(e&&e.apply(this,arguments))},r),i},n.prototype.map=function(t,e,r,i){var a=r||i||this,o=W(lt(t),this._getStoreDimIndex,this),s=pt(this);return s._store=this._store.map(o,a?H(e,a):e),s},n.prototype.modify=function(t,e,r,i){var a=r||i||this,o=W(lt(t),this._getStoreDimIndex,this);this._store.modify(o,a?H(e,a):e)},n.prototype.downSample=function(t,e,r,i){var a=pt(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),e,r,i),a},n.prototype.lttbDownSample=function(t,e){var r=pt(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),r},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,r=this.getRawDataItem(t);return new Ie(r,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new Zt(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return ht(t,r)},function(r){return ht(e,r)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},st(t)?P(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var r=this._itemVisuals[t],i=r&&r[e];return i??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var r=this._itemVisuals,i=r[t];i||(i=r[t]={});var a=i[e];return a==null&&(a=this.getVisual(e),q(a)?a=a.slice():st(a)&&(a=P({},a)),i[e]=a),a},n.prototype.setItemVisual=function(t,e,r){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,st(e)?P(i,e):i[e]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){st(t)?P(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?P(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){var r=this.hostModel&&this.hostModel.seriesIndex;an(r,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){g(this._graphicEls,function(r,i){r&&t&&t.call(e,r,i)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:W(this.dimensions,this._getDimInfo,this),this.hostModel)),bt(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var r=this[t];G(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=r.apply(this,arguments);return e.apply(this,[i].concat(on(arguments)))})},n.internalField=function(){se=function(t){var e=t._invertedIndicesMap;g(e,function(r,i){var a=t._dimInfos[i],o=a.ordinalMeta,s=t._store;if(o){r=e[i]=new jn(o.categories.length);for(var u=0;u<r.length;u++)r[u]=oe;for(var u=0;u<s.count();u++)r[s.get(a.storeDimIndex,u)]=u}})},ut=function(t,e,r){return Dt(t._getCategory(e,r),null)},ht=function(t,e){var r=t._idList[e];return r==null&&t._idDimIdx!=null&&(r=ut(t,t._idDimIdx,e)),r==null&&(r=Jn+e),r},lt=function(t){return q(t)||(t=t!=null?[t]:[]),t},pt=function(t){var e=new n(t._schema?t._schema:W(t.dimensions,t._getDimInfo,t),t.hostModel);return bt(e,t),e},bt=function(t,e){g(qn.concat(e.__wrappedMethods||[]),function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t.__wrappedMethods=e.__wrappedMethods,g(Qn,function(r){t[r]=Z(e[r])}),t._calculationInfo=P({},e._calculationInfo)},At=function(t,e){var r=t._nameList,i=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=r[e],u=i[e];if(s==null&&a!=null&&(r[e]=s=ut(t,a,e)),u==null&&o!=null&&(i[e]=u=ut(t,o,e)),u==null&&s!=null){var f=t._nameRepeatCount,l=f[s]=(f[s]||0)+1;u=s,l>1&&(u+="__ec__"+l),i[e]=u}}}(),n}();const er=tr;function nr(n,t){Me(n)||(n=un(n)),t=t||{};var e=t.coordDimensions||[],r=t.dimensionsDefine||n.dimensionsDefine||[],i=N(),a=[],o=ir(n,e,r,t.dimensionsCount),s=t.canOmitUnusedDimensions&&ln(o),u=r===n.dimensionsDefine,f=u?fn(n):cn(r),l=t.encodeDefine;!l&&t.encodeDefaulter&&(l=t.encodeDefaulter(n,o));for(var h=N(l),c=new hn(o),p=0;p<c.length;p++)c[p]=-1;function v(S){var A=c[S];if(A<0){var M=r[S],I=Q(M)?M:{name:M},w=new vt,z=I.name;z!=null&&f.get(z)!=null&&(w.name=w.displayName=z),I.type!=null&&(w.type=I.type),I.displayName!=null&&(w.displayName=I.displayName);var E=a.length;return c[S]=E,w.storeDimIndex=S,a.push(w),w}return a[A]}if(!s)for(var p=0;p<o;p++)v(p);h.each(function(S,A){var M=qt(S).slice();if(M.length===1&&!Y(M[0])&&M[0]<0){h.set(A,!1);return}var I=h.set(A,[]);g(M,function(w,z){var E=Y(w)?f.get(w):w;E!=null&&E<o&&(I[z]=E,x(v(E),A,z))})});var d=0;g(e,function(S){var A,M,I,w;if(Y(S))A=S,w={};else{w=S,A=w.name;var z=w.ordinalMeta;w.ordinalMeta=null,w=P({},w),w.ordinalMeta=z,M=w.dimsDef,I=w.otherDims,w.name=w.coordDim=w.coordDimIndex=w.dimsDef=w.otherDims=null}var E=h.get(A);if(E!==!1){if(E=qt(E),!E.length)for(var Kt=0;Kt<(M&&M.length||1);Kt++){for(;d<o&&v(d).coordDim!=null;)d++;d<o&&E.push(d++)}g(E,function(je,jt){var U=v(je);if(u&&w.type!=null&&(U.type=w.type),x(tt(U,w),A,jt),U.name==null&&M){var it=M[jt];!Q(it)&&(it={name:it}),U.name=U.displayName=it.name,U.defaultTooltip=it.defaultTooltip}I&&tt(U.otherDims,I)})}});function x(S,A,M){Te.get(A)!=null?S.otherDims[A]=M:(S.coordDim=A,S.coordDimIndex=M,i.set(A,!0))}var D=t.generateCoord,m=t.generateCoordCount,_=m!=null;m=D?m||1:0;var y=D||"value";function b(S){S.name==null&&(S.name=S.coordDim)}if(s)g(a,function(S){b(S)}),a.sort(function(S,A){return S.storeDimIndex-A.storeDimIndex});else for(var C=0;C<o;C++){var T=v(C),O=T.coordDim;O==null&&(T.coordDim=ar(y,i,_),T.coordDimIndex=0,(!D||m<=0)&&(T.isExtraCoord=!0),m--),b(T),T.type==null&&(pn(n,C)===vn.Must||T.isExtraCoord&&(T.otherDims.itemName!=null||T.otherDims.seriesName!=null))&&(T.type="ordinal")}return rr(a),new dn({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function rr(n){for(var t=N(),e=0;e<n.length;e++){var r=n[e],i=r.name,a=t.get(i)||0;a>0&&(r.name=i+(a-1)),a++,t.set(i,a)}}function ir(n,t,e,r){var i=Math.max(n.dimensionsDetectedCount||1,t.length,e.length,r||0);return g(t,function(a){var o;Q(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function ar(n,t,e){if(e||t.hasKey(n)){for(var r=0;t.hasKey(n+r);)r++;n+=r}return t.set(n,!0),n}function Le(n,t,e,r,i,a){n=n||0;var o=e[1]-e[0];if(i!=null&&(i=j(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=j(s,[0,o]),i=a=j(s,[i,a]),r=0}t[0]=j(t[0],e),t[1]=j(t[1],e);var u=wt(t,r);t[r]+=n;var f=i||0,l=e.slice();u.sign<0?l[0]+=f:l[1]-=f,t[r]=j(t[r],l);var h;return h=wt(t,r),i!=null&&(h.sign!==u.sign||h.span<i)&&(t[1-r]=t[r]+u.sign*i),h=wt(t,r),a!=null&&h.span>a&&(t[1-r]=t[r]+h.sign*a),t}function wt(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function j(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var X=!0,ct=Math.min,nt=Math.max,or=Math.pow,sr=1e4,ur=6,lr=6,ue="globalPan",fr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},cr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},le={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},hr=0,pr=function(n){R(t,n);function t(e){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=e,r.group=new Bt,r._uid="brushController_"+hr++,g(xr,function(i,a){this._handlers[a]=H(i,this)},r),r}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var r=this._zr;this._enableGlobalPan||gn(r,ue,this._uid),g(this._handlers,function(i,a){r.on(a,i)}),this._brushType=e.brushType,this._brushOption=F(Z(le),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;mn(e,ue,this._uid),g(this._handlers,function(r,i){e.off(i,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var r=this._panels={};g(e,function(i){r[i.panelId]=Z(i)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=L(e,function(c){return F(Z(le),c,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Zt(i,e,f,u).add(l).update(l).remove(h).execute(),this;function u(c,p){return(c.id!=null?c.id:r+p)+"-"+c.brushType}function f(c,p){return u(c.__brushOption,p)}function l(c,p){var v=e[c];if(p!=null&&i[p]===s)a[c]=i[p];else{var d=a[c]=p!=null?(i[p].__brushOption=v,i[p]):ke(o,Pe(o,v));Ft(o,d)}}function h(c){i[c]!==s&&o.group.remove(i[c])}},t.prototype.unmount=function(){return this.enableBrush(!1),Mt(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(yn);function Pe(n,t){var e=_t[t.brushType].createCover(n,t);return e.__brushOption=t,Ne(e,t),n.group.add(e),e}function ke(n,t){var e=Wt(t);return e.endCreating&&(e.endCreating(n,t),Ne(t,t.__brushOption)),t}function Be(n,t){var e=t.__brushOption;Wt(t).updateCoverShape(n,t,e.range,e)}function Ne(n,t){var e=t.z;e==null&&(e=sr),n.traverse(function(r){r.z=e,r.z2=e})}function Ft(n,t){Wt(t).updateCommon(n,t),Be(n,t)}function Wt(n){return _t[n.__brushOption.brushType]}function Gt(n,t,e){var r=n._panels;if(!r)return X;var i,a=n._transform;return g(r,function(o){o.isTargetByCursor(t,e,a)&&(i=o)}),i}function ze(n,t){var e=n._panels;if(!e)return X;var r=t.__brushOption.panelId;return r!=null?e[r]:X}function Mt(n){var t=n._covers,e=t.length;return g(t,function(r){n.group.remove(r)},n),t.length=0,!!e}function K(n,t){var e=L(n._covers,function(r){var i=r.__brushOption,a=Z(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function vr(n){var t=n._track;if(!t.length)return!1;var e=t[t.length-1],r=t[0],i=e[0]-r[0],a=e[1]-r[1],o=or(i*i+a*a,.5);return o>ur}function Ve(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function Ze(n,t,e,r){var i=new Bt;return i.add(new dt({name:"main",style:Ut(e),silent:!0,draggable:!0,cursor:"move",drift:B(fe,n,t,i,["n","s","w","e"]),ondragend:B(K,t,{isEnd:!0})})),g(r,function(a){i.add(new dt({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:B(fe,n,t,i,a),ondragend:B(K,t,{isEnd:!0})}))}),i}function Fe(n,t,e,r){var i=r.brushStyle.lineWidth||0,a=nt(i,lr),o=e[0][0],s=e[1][0],u=o-i/2,f=s-i/2,l=e[0][1],h=e[1][1],c=l-a+i/2,p=h-a+i/2,v=l-o,d=h-s,x=v+i,D=d+i;V(n,t,"main",o,s,v,d),r.transformable&&(V(n,t,"w",u,f,a,D),V(n,t,"e",c,f,a,D),V(n,t,"n",u,f,x,a),V(n,t,"s",u,p,x,a),V(n,t,"nw",u,f,a,a),V(n,t,"ne",c,f,a,a),V(n,t,"sw",u,p,a,a),V(n,t,"se",c,p,a,a))}function It(n,t){var e=t.__brushOption,r=e.transformable,i=t.childAt(0);i.useStyle(Ut(e)),i.attr({silent:!r,cursor:r?"move":"default"}),g([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?Ot(n,a[0]):gr(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?cr[s]+"-resize":null})})}function V(n,t,e,r,i,a,o){var s=t.childOfName(e);s&&s.setShape(yr(Ht(n,t,[[r,i],[r+a,i+o]])))}function Ut(n){return tt({strokeNoScale:!0},n.brushStyle)}function We(n,t,e,r){var i=[ct(n,e),ct(t,r)],a=[nt(n,e),nt(t,r)];return[[i[0],a[0]],[i[1],a[1]]]}function dr(n){return Oe(n.group)}function Ot(n,t){var e={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Dn(e[t],dr(n));return r[i]}function gr(n,t){var e=[Ot(n,t[0]),Ot(n,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function fe(n,t,e,r,i,a){var o=e.__brushOption,s=n.toRectRange(o.range),u=Ge(t,i,a);g(r,function(f){var l=fr[f];s[l[0]][l[1]]+=u[l[0]]}),o.range=n.fromRectRange(We(s[0][0],s[1][0],s[0][1],s[1][1])),Ft(t,e),K(t,{isEnd:!1})}function mr(n,t,e,r){var i=t.__brushOption.range,a=Ge(n,e,r);g(i,function(o){o[0]+=a[0],o[1]+=a[1]}),Ft(n,t),K(n,{isEnd:!1})}function Ge(n,t,e){var r=n.group,i=r.transformCoordToLocal(t,e),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Ht(n,t,e){var r=ze(n,t);return r&&r!==X?r.clipPath(e,n._transform):Z(e)}function yr(n){var t=ct(n[0][0],n[1][0]),e=ct(n[0][1],n[1][1]),r=nt(n[0][0],n[1][0]),i=nt(n[0][1],n[1][1]);return{x:t,y:e,width:r-t,height:i-e}}function _r(n,t,e){if(!(!n._brushType||Dr(n,t.offsetX,t.offsetY))){var r=n._zr,i=n._covers,a=Gt(n,t,e);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===X||s.panelId===a.panelId)&&_t[s.brushType].contain(i[o],e[0],e[1]))return}a&&r.setCursorStyle("crosshair")}}function Rt(n){var t=n.event;t.preventDefault&&t.preventDefault()}function Et(n,t,e){return n.childOfName("main").contain(t,e)}function Ue(n,t,e,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(e.slice()),vr(n)||i){if(a&&!i){o.brushMode==="single"&&Mt(n);var u=Z(o);u.brushType=ce(u.brushType,a),u.panelId=a===X?null:a.panelId,i=n._creatingCover=Pe(n,u),n._covers.push(i)}if(i){var f=_t[ce(n._brushType,a)],l=i.__brushOption;l.range=f.getCreatingRange(Ht(n,i,n._track)),r&&(ke(n,i),f.updateCommon(n,i)),Be(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&Gt(n,t,e)&&Mt(n)&&(s={isEnd:r,removeOnClick:!0});return s}function ce(n,t){return n==="auto"?t.defaultBrushType:n}var xr={mousedown:function(n){if(this._dragging)he(this,n);else if(!n.target||!n.target.draggable){Rt(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var e=this._creatingPanel=Gt(this,n,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var t=n.offsetX,e=n.offsetY,r=this.group.transformCoordToLocal(t,e);if(_r(this,n,r),this._dragging){Rt(n);var i=Ue(this,n,r,!1);i&&K(this,i)}},mouseup:function(n){he(this,n)}};function he(n,t){if(n._dragging){Rt(t);var e=t.offsetX,r=t.offsetY,i=n.group.transformCoordToLocal(e,r),a=Ue(n,t,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&K(n,a)}}function Dr(n,t,e){var r=n._zr;return t<0||t>r.getWidth()||e<0||e>r.getHeight()}var _t={lineX:pe(0),lineY:pe(1),rect:{createCover:function(n,t){function e(r){return r}return Ze({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=Ve(n);return We(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,r){Fe(n,t,e,r)},updateCommon:It,contain:Et},polygon:{createCover:function(n,t){var e=new Bt;return e.add(new _n({name:"main",style:Ut(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new xn({name:"main",draggable:!0,drift:B(mr,n,t),ondragend:B(K,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,r){t.childAt(0).setShape({points:Ht(n,t,e)})},updateCommon:It,contain:Et}};function pe(n){return{createCover:function(t,e){return Ze({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=Ve(t),r=ct(e[0][n],e[1][n]),i=nt(e[0][n],e[1][n]);return[r,i]},updateCoverShape:function(t,e,r,i){var a,o=ze(t,e);if(o!==X&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[r,a];n&&u.reverse(),Fe(t,e,u,i)},updateCommon:It,contain:Et}}const Sr=pr;function br(n){return n=$t(n),function(t){return Sn(t,n)}}function Ar(n,t){return n=$t(n),function(e){var r=t??e,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function wr(n,t,e){var r=$t(n);return function(i,a){return r.contain(a[0],a[1])&&!bn(i,t,e)}}function $t(n){return An.create(n)}var ve=["x","y","radius","angle","single"],Cr=["cartesian2d","polar","singleAxis"];function Tr(n){var t=n.get("coordinateSystem");return et(Cr,t)>=0}function $(n){return n+"Axis"}function Mr(n,t){var e=N(),r=[],i=N();n.eachComponent({mainType:"dataZoom",query:t},function(l){i.get(l.uid)||s(l)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(l){!i.get(l.uid)&&u(l)&&(s(l),a=!0)}function s(l){i.set(l.uid,!0),r.push(l),f(l)}function u(l){var h=!1;return l.eachTargetAxis(function(c,p){var v=e.get(c);v&&v[p]&&(h=!0)}),h}function f(l){l.eachTargetAxis(function(h,c){(e.get(h)||e.set(h,[]))[c]=!0})}return r}function Pi(n){var t=n.ecModel,e={infoList:[],infoMap:N()};return n.eachTargetAxis(function(r,i){var a=t.getComponent($(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,u=e.infoMap.get(s);u||(u={model:o,axisModels:[]},e.infoList.push(u),e.infoMap.set(s,u)),u.axisModels.push(a)}}}),e}var Ct=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),Ir=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,r,i){var a=de(e);this.settledOption=a,this.mergeDefaultAndTheme(e,i),this._doInit(a)},t.prototype.mergeOption=function(e){var r=de(e);F(this.option,e,!0),F(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(e){var r=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),r=this._targetAxisInfoMap=N(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var r=!1;return g(ve,function(i){var a=this.getReferringComponents($(i),wn);if(a.specified){r=!0;var o=new Ct;g(a.models,function(s){o.add(s.componentIndex)}),e.set(i,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(e,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});u(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(l){return l.get("orient",!0)===r}});u(s,"single")}function u(f,l){var h=f[0];if(h){var c=new Ct;if(c.add(h.componentIndex),e.set(l,c),a=!1,l==="x"||l==="y"){var p=h.getReferringComponents("grid",gt).models[0];p&&g(f,function(v){h.componentIndex!==v.componentIndex&&p===v.getReferringComponents("grid",gt).models[0]&&c.add(v.componentIndex)})}}}a&&g(ve,function(f){if(a){var l=i.findComponents({mainType:$(f),filter:function(c){return c.get("type",!0)==="category"}});if(l[0]){var h=new Ct;h.add(l[0].componentIndex),e.set(f,h),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(r){!e&&(e=r)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var r=this._rangePropMode,i=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],function(a,o){var s=e[a[0]]!=null,u=e[a[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(r,i){e==null&&(e=this.ecModel.getComponent($(r),i))},this),e},t.prototype.eachTargetAxis=function(e,r){this._targetAxisInfoMap.each(function(i,a){g(i.indexList,function(o){e.call(r,a,o)})})},t.prototype.getAxisProxy=function(e,r){var i=this.getAxisModel(e,r);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(e,r){var i=this._targetAxisInfoMap.get(e);if(i&&i.indexMap[r])return this.ecModel.getComponent($(e),r)},t.prototype.setRawRange=function(e){var r=this.option,i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a){(e[a[0]]!=null||e[a[1]]!=null)&&(r[a[0]]=i[a[0]]=e[a[0]],r[a[1]]=i[a[1]]=e[a[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var r=this.option;g(["start","startValue","end","endValue"],function(i){r[i]=e[i]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,r){if(e==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var f=this.getAxisProxy(o,s.indexList[u]);if(f.hostedBy(this))return f;r||(r=f)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Nt);function de(n){var t={};return g(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}const Or=Ir;var Rr=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Or);const Er=Rr;var Lr=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,i,a){this.dataZoomModel=e,this.ecModel=r,this.api=i},t.type="dataZoom",t}(zt);const Pr=Lr;var kr=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Pr);const Br=kr;var J=g,ge=In,Nr=function(){function n(t,e,r,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(Tr(e)){var r=$(this._dimName),i=e.getReferringComponents(r,gt).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Z(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],f;J(["start","end"],function(c,p){var v=t[c],d=t[c+"Value"];a[p]==="percent"?(v==null&&(v=o[p]),d=i.parse(at(v,o,e))):(f=!0,d=d==null?e[p]:i.parse(d),v=at(d,e,o)),u[p]=d==null||isNaN(d)?e[p]:d,s[p]=v==null||isNaN(v)?o[p]:v}),ge(u),ge(s);var l=this._minMaxSpan;f?h(u,s,e,o,!1):h(s,u,o,e,!0);function h(c,p,v,d,x){var D=x?"Span":"ValueSpan";Le(0,c,v,"all",l["min"+D],l["max"+D]);for(var m=0;m<2;m++)p[m]=at(c[m],v,d,!0),x&&(p[m]=i.parse(p[m]))}return{valueWindow:u,percentWindow:s}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=zr(this,this._dimName,e),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;J(i,function(u){var f=u.getData(),l=f.mapDimensionsAll(r);if(l.length){if(a==="weakFilter"){var h=f.getStore(),c=L(l,function(p){return f.getDimensionIndex(p)},f);f.filterSelf(function(p){for(var v,d,x,D=0;D<l.length;D++){var m=h.get(c[D],p),_=!isNaN(m),y=m<o[0],b=m>o[1];if(_&&!y&&!b)return!0;_&&(x=!0),y&&(v=!0),b&&(d=!0)}return x&&v&&d})}else J(l,function(p){if(a==="empty")u.setData(f=f.map(p,function(d){return s(d)?d:NaN}));else{var v={};v[p]=o,f.selectRange(v)}});J(l,function(p){f.setApproximateExtent(o,p)})}});function s(u){return u>=o[0]&&u<=o[1]}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,r=this._dataExtent;J(["min","max"],function(i){var a=e.get(i+"Span"),o=e.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=at(r[0]+o,r,[0,100],!0):a!=null&&(o=at(a,[0,100],r,!0)-r[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,r=this._valueWindow;if(e){var i=Cn(r,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;e[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),e[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function zr(n,t,e){var r=[1/0,-1/0];J(e,function(o){Tn(r,o.getData(),t)});var i=n.getAxisModel(),a=Mn(i.axis.scale,i,r).calculate();return[a.min,a.max]}const Vr=Nr;var Zr={getTargetSeries:function(n){function t(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var u=n.getComponent($(o),s);i(o,s,u,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var e=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Vr(i,a,s,n),e.push(o.__dzAxisProxy))});var r=N();return g(e,function(i){g(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(r,i){e.getAxisProxy(r,i).reset(e)}),e.eachTargetAxis(function(r,i){e.getAxisProxy(r,i).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var r=e.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const Fr=Zr;function Wr(n){n.registerAction("dataZoom",function(t,e){var r=Mr(e,t);g(r,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var me=!1;function Gr(n){me||(me=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Fr),Wr(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Ur(n){n.registerComponentModel(Er),n.registerComponentView(Br),Gr(n)}var k=function(){function n(){}return n}(),He={};function ft(n,t){He[n]=t}function $e(n){return He[n]}var Hr=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;g(this.option.feature,function(r,i){var a=$e(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(e)),F(r,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Nt);const $r=Hr;function Yr(n,t,e){var r=t.getBoxLayoutParams(),i=t.get("padding"),a={width:e.getWidth(),height:e.getHeight()},o=Re(r,a,i);On(t.get("orient"),n,t.get("itemGap"),o.width,o.height),Rn(n,r,a,i)}function Xr(n,t){var e=En(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),n=new dt({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var Kr=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,i,a){var o=this.group;if(o.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),u=e.get("orient")==="vertical",f=e.get("feature")||{},l=this._features||(this._features={}),h=[];g(f,function(v,d){h.push(d)}),new Zt(this._featureNames||[],h).add(c).update(c).remove(B(c,null)).execute(),this._featureNames=h;function c(v,d){var x=h[v],D=h[d],m=f[x],_=new Ie(m,e,e.ecModel),y;if(a&&a.newTitle!=null&&a.featureName===x&&(m.title=a.newTitle),x&&!D){if(jr(x))y={onclick:_.option.onclick,featureName:x};else{var b=$e(x);if(!b)return;y=new b}l[x]=y}else if(y=l[D],!y)return;y.uid=Ln("toolbox-feature"),y.model=_,y.ecModel=r,y.api=i;var C=y instanceof k;if(!x&&D){C&&y.dispose&&y.dispose(r,i);return}if(!_.get("show")||C&&y.unusable){C&&y.remove&&y.remove(r,i);return}p(_,y,x),_.setIconStatus=function(T,O){var S=this.option,A=this.iconPaths;S.iconStatus=S.iconStatus||{},S.iconStatus[T]=O,A[T]&&(O==="emphasis"?Qt:te)(A[T])},y instanceof k&&y.render&&y.render(_,r,i,a)}function p(v,d,x){var D=v.getModel("iconStyle"),m=v.getModel(["emphasis","iconStyle"]),_=d instanceof k&&d.getIcons?d.getIcons():v.get("icon"),y=v.get("title")||{},b,C;Y(_)?(b={},b[x]=_):b=_,Y(y)?(C={},C[x]=y):C=y;var T=v.iconPaths={};g(b,function(O,S){var A=Pn(O,{},{x:-s/2,y:-s/2,width:s,height:s});A.setStyle(D.getItemStyle());var M=A.ensureState("emphasis");M.style=m.getItemStyle();var I=new mt({style:{text:C[S],align:m.get("textAlign"),borderRadius:m.get("textBorderRadius"),padding:m.get("textPadding"),fill:null},ignore:!0});A.setTextContent(I),kn({el:A,componentModel:e,itemName:S,formatterParamsExtra:{title:C[S]}}),A.__title=C[S],A.on("mouseover",function(){var w=m.getItemStyle(),z=u?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";I.setStyle({fill:m.get("textFill")||w.fill||w.stroke||"#000",backgroundColor:m.get("textBackgroundColor")}),A.setTextConfig({position:m.get("textPosition")||z}),I.ignore=!e.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){v.get(["iconStatus",S])!=="emphasis"&&i.leaveEmphasis(this),I.hide()}),(v.get(["iconStatus",S])==="emphasis"?Qt:te)(A),o.add(A),A.on("click",H(d.onclick,d,r,i,S)),T[S]=A})}Yr(o,e,i),o.add(Xr(o.getBoundingRect(),e)),u||o.eachChild(function(v){var d=v.__title,x=v.ensureState("emphasis"),D=x.textConfig||(x.textConfig={}),m=v.getTextContent(),_=m&&m.ensureState("emphasis");if(_&&!G(_)&&d){var y=_.style||(_.style={}),b=Bn(d,mt.makeFont(y)),C=v.x+o.x,T=v.y+o.y+s,O=!1;T+b.height>i.getHeight()&&(D.position="top",O=!0);var S=O?-5-b.height:s+10;C+b.width/2>i.getWidth()?(D.position=["100%",S],y.align="right"):C-b.width/2<0&&(D.position=[0,S],y.align="left")}})},t.prototype.updateView=function(e,r,i,a){g(this._features,function(o){o instanceof k&&o.updateView&&o.updateView(o.model,r,i,a)})},t.prototype.remove=function(e,r){g(this._features,function(i){i instanceof k&&i.remove&&i.remove(e,r)}),this.group.removeAll()},t.prototype.dispose=function(e,r){g(this._features,function(i){i instanceof k&&i.dispose&&i.dispose(e,r)})},t.type="toolbox",t}(zt);function jr(n){return n.indexOf("my")===0}const Jr=Kr;var qr=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){var i=this.model,a=i.get("name")||e.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),f=Nn.browser;if(G(MouseEvent)&&(f.newEdge||!f.ie&&!f.edge)){var l=document.createElement("a");l.download=a+"."+s,l.target="_blank",l.href=u;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var c=u.split(","),p=c[0].indexOf("base64")>-1,v=o?decodeURIComponent(c[1]):c[1];p&&(v=window.atob(v));var d=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var x=v.length,D=new Uint8Array(x);x--;)D[x]=v.charCodeAt(x);var m=new Blob([D]);window.navigator.msSaveOrOpenBlob(m,d)}else{var _=document.createElement("iframe");document.body.appendChild(_);var y=_.contentWindow,b=y.document;b.open("image/svg+xml","replace"),b.write(v),b.close(),y.focus(),b.execCommand("SaveAs",!0,d),document.body.removeChild(_)}}else{var C=i.get("lang"),T='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',O=window.open();O.document.write(T),O.document.title=a}},t.getDefaultOption=function(e){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(k);const Qr=qr;var ye="__ec_magicType_stack__",ti=[["line","bar"],["stack"]],ei=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,r=e.get("icon"),i={};return g(e.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},t.getDefaultOption=function(e){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(e,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(_e[i]){var s={series:[]},u=function(h){var c=h.subType,p=h.id,v=_e[i](c,p,h,a);v&&(tt(v,h.option),s.series.push(v));var d=h.coordinateSystem;if(d&&d.type==="cartesian2d"&&(i==="line"||i==="bar")){var x=d.getAxesByScale("ordinal")[0];if(x){var D=x.dim,m=D+"Axis",_=h.getReferringComponents(m,gt).models[0],y=_.componentIndex;s[m]=s[m]||[];for(var b=0;b<=y;b++)s[m][y]=s[m][y]||{};s[m][y].boundaryGap=i==="bar"}}};g(ti,function(h){et(h,i)>=0&&g(h,function(c){a.setIconStatus(c,"normal")})}),a.setIconStatus(i,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var f,l=i;i==="stack"&&(f=F({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(l="tiled")),r.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:f,featureName:"magicType"})}},t}(k),_e={line:function(n,t,e,r){if(n==="bar")return F({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,t,e,r){if(n==="line")return F({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,t,e,r){var i=e.get("stack")===ye;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),F({id:t,stack:i?"":ye},r.get(["option","stack"])||{},!0)}};Vt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});const ni=ei;var xt=new Array(60).join("-"),rt="	";function ri(n){var t={},e=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(i)}else e.push(i)}else e.push(i)}),{seriesGroupByCategoryAxis:t,other:e,meta:r}}function ii(n){var t=[];return g(n,function(e,r){var i=e.categoryAxis,a=e.valueAxis,o=a.dim,s=[" "].concat(L(e.series,function(p){return p.name})),u=[i.model.getCategories()];g(e.series,function(p){var v=p.getRawData();u.push(p.getRawData().mapArray(v.mapDimension(o),function(d){return d}))});for(var f=[s.join(rt)],l=0;l<u[0].length;l++){for(var h=[],c=0;c<u.length;c++)h.push(u[c][l]);f.push(h.join(rt))}t.push(f.join(`
`))}),t.join(`

`+xt+`

`)}function ai(n){return L(n,function(t){var e=t.getRawData(),r=[t.name],i=[];return e.each(e.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=e.getName(o),u=0;u<a-1;u++)i[u]=arguments[u];r.push((s?s+rt:"")+i.join(rt))}),r.join(`
`)}).join(`

`+xt+`

`)}function oi(n){var t=ri(n);return{value:Vn([ii(t.seriesGroupByCategoryAxis),ai(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+xt+`

`),meta:t.meta}}function yt(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function si(n){var t=n.slice(0,n.indexOf(`
`));if(t.indexOf(rt)>=0)return!0}var Lt=new RegExp("["+rt+"]+","g");function ui(n){for(var t=n.split(/\n+/g),e=yt(t.shift()).split(Lt),r=[],i=L(e,function(u){return{name:u,data:[]}}),a=0;a<t.length;a++){var o=yt(t[a]).split(Lt);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function li(n){for(var t=n.split(/\n+/g),e=yt(t.shift()),r=[],i=0;i<t.length;i++){var a=yt(t[i]);if(a){var o=a.split(Lt),s="",u=void 0,f=!1;isNaN(o[0])?(f=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},u=r[i].value):u=r[i]=[];for(var l=0;l<o.length;l++)u.push(+o[l]);u.length===1&&(f?r[i].value=u[0]:r[i]=u[0])}}return{name:e,data:r}}function fi(n,t){var e=n.split(new RegExp(`
*`+xt+`
*`,"g")),r={series:[]};return g(e,function(i,a){if(si(i)){var o=ui(i),s=t[a],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=li(i);r.series.push(o)}}),r}var ci=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var f=document.createElement("div"),l=document.createElement("textarea");f.style.cssText="overflow:auto";var h=a.get("optionToContent"),c=a.get("contentToOption"),p=oi(e);if(G(h)){var v=h(r.getOption());Y(v)?f.innerHTML=v:zn(v)&&f.appendChild(v)}else{l.readOnly=a.get("readOnly");var d=l.style;d.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",d.color=a.get("textColor"),d.borderColor=a.get("textareaBorderColor"),d.backgroundColor=a.get("textareaColor"),l.value=p.value,f.appendChild(l)}var x=p.meta,D=document.createElement("div");D.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+a.get("buttonColor"),m+=";color:"+a.get("buttonTextColor");var b=this;function C(){i.removeChild(o),b._dom=null}ee(_,"click",C),ee(y,"click",function(){if(c==null&&h!=null||c!=null&&h==null){C();return}var T;try{G(c)?T=c(f,r.getOption()):T=fi(l.value,x)}catch(O){throw C(),new Error("Data view format error "+O)}T&&r.dispatchAction({type:"changeDataView",newOption:T}),C()}),_.innerHTML=u[1],y.innerHTML=u[2],y.style.cssText=_.style.cssText=m,!a.get("readOnly")&&D.appendChild(y),D.appendChild(_),o.appendChild(s),o.appendChild(f),o.appendChild(D),f.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},t.prototype.remove=function(e,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.getDefaultOption=function(e){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(k);function hi(n,t){return L(n,function(e,r){var i=t&&t[r];if(Q(i)&&!q(i)){var a=Q(e)&&!q(e);a||(e={value:e});var o=i.name!=null&&e.name==null;return e=tt(e,i),o&&delete e.name,e}else return e})}Vt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];g(n.newOption.series,function(r){var i=t.getSeriesByName(r.name)[0];if(!i)e.push(P({type:"scatter"},r));else{var a=i.get("data");e.push({name:r.name,data:hi(r.data,a)})}}),t.mergeOption(tt({series:e},n.newOption))});const pi=ci;var Ye=g,Xe=Zn();function vi(n,t){var e=Yt(n);Ye(t,function(r,i){for(var a=e.length-1;a>=0;a--){var o=e[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var u=s.getPercentRange();e[0][i]={dataZoomId:i,start:u[0],end:u[1]}}}}),e.push(t)}function di(n){var t=Yt(n),e=t[t.length-1];t.length>1&&t.pop();var r={};return Ye(e,function(i,a){for(var o=t.length-1;o>=0;o--)if(i=t[o][a],i){r[a]=i;break}}),r}function gi(n){Xe(n).snapshots=null}function mi(n){return Yt(n).length}function Yt(n){var t=Xe(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var yi=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){gi(e),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(k);Vt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});const _i=yi;var xi=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Di=function(){function n(t,e,r){var i=this;this._targetInfoList=[];var a=xe(e,t);g(Si,function(o,s){(!r||!r.include||et(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=Tt[r.brushType](0,a,i);r.__rangeOffset={offset:Ae[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,r){g(t,function(i){var a=this.findTargetInfo(i,e);a&&a!==!0&&g(a.coordSyses,function(o){var s=Tt[i.brushType](1,o,i.range,!0);r(i,s.values,o,e)})},this)},n.prototype.setInputRanges=function(t,e){g(t,function(r){var i=this.findTargetInfo(r,e);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=Tt[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Ae[r.brushType](a.values,o.offset,bi(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(t,e){return L(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e?e(r):null,clipPath:br(i),isTargetByCursor:wr(i,t,r.coordSysModel),getLinearBrushOtherExtent:Ar(i)}})},n.prototype.controlSeries=function(t,e,r){var i=this.findTargetInfo(t,r);return i===!0||i&&et(i.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var r=this._targetInfoList,i=xe(e,t),a=0;a<r.length;a++){var o=r[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<De.length;u++)if(De[u](i,o))return o}return!0},n}();function Pt(n){return n[0]>n[1]&&n.reverse(),n}function xe(n,t){return Ee(n,t,{includeMainTypes:xi})}var Si={grid:function(n,t){var e=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=N(),o={},s={};!e&&!r&&!i||(g(e,function(u){var f=u.axis.grid.model;a.set(f.id,f),o[f.id]=!0}),g(r,function(u){var f=u.axis.grid.model;a.set(f.id,f),s[f.id]=!0}),g(i,function(u){a.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),a.each(function(u){var f=u.coordinateSystem,l=[];g(f.getCartesians(),function(h,c){(et(e,h.getAxis("x").model)>=0||et(r,h.getAxis("y").model)>=0)&&l.push(h)}),t.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:l[0],coordSyses:l,getPanelRect:Se.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,t){g(n.geoModels,function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:Se.geo})})}},De=[function(n,t){var e=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&e&&(i=e.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],Se={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(Oe(n)),t}},Tt={lineX:B(be,0),lineY:B(be,1),rect:function(n,t,e,r){var i=n?t.pointToData([e[0][0],e[1][0]],r):t.dataToPoint([e[0][0],e[1][0]],r),a=n?t.pointToData([e[0][1],e[1][1]],r):t.dataToPoint([e[0][1],e[1][1]],r),o=[Pt([i[0],a[0]]),Pt([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,t,e,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=L(e,function(o){var s=n?t.pointToData(o,r):t.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function be(n,t,e,r){var i=e.getAxis(["x","y"][n]),a=Pt(L([0,1],function(s){return t?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var Ae={lineX:B(we,0),lineY:B(we,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return L(n,function(r,i){return[r[0]-e[0]*t[i][0],r[1]-e[1]*t[i][1]]})}};function we(n,t,e,r){return[t[0]-r[n]*e[0],t[1]-r[n]*e[1]]}function bi(n,t){var e=Ce(n),r=Ce(t),i=[e[0]/r[0],e[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function Ce(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}const Ke=Di;var kt=g,Ai=Wn("toolbox-dataZoom_"),wi=function(n){R(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,i,a){this._brushController||(this._brushController=new Sr(i.getZr()),this._brushController.on("brush",H(this._onBrush,this)).mount()),Mi(e,r,this,a,i),Ti(e,r)},t.prototype.onclick=function(e,r,i){Ci[i].call(this)},t.prototype.remove=function(e,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var r=e.areas;if(!e.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new Ke(Xt(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(f,l,h){if(h.type==="cartesian2d"){var c=f.brushType;c==="rect"?(s("x",h,l[0]),s("y",h,l[1])):s({lineX:"x",lineY:"y"}[c],h,l)}}),vi(a,i),this._dispatchZoomAction(i);function s(f,l,h){var c=l.getAxis(f),p=c.model,v=u(f,p,a),d=v.findRepresentativeAxisProxy(p).getMinMaxSpan();(d.minValueSpan!=null||d.maxValueSpan!=null)&&(h=Le(0,h.slice(),c.scale.getExtent(),0,d.minValueSpan,d.maxValueSpan)),v&&(i[v.id]={dataZoomId:v.id,startValue:h[0],endValue:h[1]})}function u(f,l,h){var c;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var v=p.getAxisModel(f,l.componentIndex);v&&(c=p)}),c}},t.prototype._dispatchZoomAction=function(e){var r=[];kt(e,function(i,a){r.push(Z(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(e){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(k),Ci={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(di(this.ecModel))}};function Xt(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function Ti(n,t){n.setIconStatus("back",mi(t)>1?"emphasis":"normal")}function Mi(n,t,e,r,i){var a=e._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),e._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new Ke(Xt(n),t,{include:["grid"]}),s=o.makePanelOpts(i,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Fn("dataZoom",function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var r=t.getModel(e),i=[],a=Xt(r),o=Ee(n,a);kt(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),kt(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,f,l){var h=u.componentIndex,c={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Ai+f+h};c[l]=h,i.push(c)}return i});const Ii=wi;function ki(n){n.registerComponentModel($r),n.registerComponentView(Jr),ft("saveAsImage",Qr),ft("magicType",ni),ft("dataView",pi),ft("dataZoom",Ii),ft("restore",_i),Gn(Ur)}var Oi=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Nt),Ri=function(n){R(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,i){if(this.group.removeAll(),!!e.get("show")){var a=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),u=e.get("textAlign"),f=Un(e.get("textBaseline"),e.get("textVerticalAlign")),l=new mt({style:ne(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=l.getBoundingRect(),c=e.get("subtext"),p=new mt({style:ne(s,{text:c,fill:s.getTextColor(),y:h.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),v=e.get("link"),d=e.get("sublink"),x=e.get("triggerEvent",!0);l.silent=!v&&!x,p.silent=!d&&!x,v&&l.on("click",function(){re(v,"_"+e.get("target"))}),d&&p.on("click",function(){re(d,"_"+e.get("subtarget"))}),ie(l).eventData=ie(p).eventData=x?{componentType:"title",componentIndex:e.componentIndex}:null,a.add(l),c&&a.add(p);var D=a.getBoundingRect(),m=e.getBoxLayoutParams();m.width=D.width,m.height=D.height;var _=Re(m,{width:i.getWidth(),height:i.getHeight()},e.get("padding"));u||(u=e.get("left")||e.get("right"),u==="middle"&&(u="center"),u==="right"?_.x+=_.width:u==="center"&&(_.x+=_.width/2)),f||(f=e.get("top")||e.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?_.y+=_.height:f==="middle"&&(_.y+=_.height/2),f=f||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var y={align:u,verticalAlign:f};l.setStyle(y),p.setStyle(y),D=a.getBoundingRect();var b=_.margin,C=e.getItemStyle(["color","opacity"]);C.fill=e.get("backgroundColor");var T=new dt({shape:{x:D.x-b[3],y:D.y-b[0],width:D.width+b[1]+b[3],height:D.height+b[0]+b[2],r:e.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});a.add(T)}},t.type="title",t}(zt);function Bi(n){n.registerComponentModel(Oi),n.registerComponentView(Ri)}function Ni(n,t,e){t=q(t)&&{coordDimensions:t}||P({encodeDefine:n.getEncode()},t);var r=n.getSource(),i=nr(r,t).dimensions,a=new er(i,n);return a.initData(r,e),a}export{Or as D,er as S,Pr as a,$ as b,Pi as c,Ni as d,Bi as e,ki as f,Li as g,Gr as i,Xr as m,nr as p,Le as s};
